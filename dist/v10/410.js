"use strict";(self.webpackChunkdocs_nestjs_com=self.webpackChunkdocs_nestjs_com||[]).push([[410],{6410:(v,t,o)=>{o.r(t),o.d(t,{DevtoolsModule:()=>d});var p=o(177),c=o(685),E=o(445),i=o(8050),e=o(4438),a=o(4819),l=o(2469);const F=[{path:"overview",component:(()=>{class s extends i.y{static \u0275fac=(()=>{let u;return function(r){return(u||(u=e.xGo(s)))(r||s)}})();static \u0275cmp=e.VBU({type:s,selectors:[["app-devtools-overview"]],features:[e.Vt3],decls:339,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/Lou8is/docs.nestjs.fr/edit/main/content/devtools/overview.md","aria-label","Proposer des modifications","title","Proposer des modifications"],[1,"fas","fa-edit"],["id","vue-densemble"],[1,"info"],["rel","nofollow","target","_blank","href","https://devtools.nestjs.com"],[1,"language-typescript"],[1,"language-bash"],[1,"warning"],["src","/assets/devtools/modules-graph.png"],["src","/assets/devtools/classes-graph.png"],["src","/assets/devtools/node-popup.png"],["src","/assets/devtools/subtree-view.png"],["width","1000","height","565","src",e.wXG`https://www.youtube.com/embed/bW8V-ssfnvM`,"title","Lecteur vid\xe9o YouTube","frameBorder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share","allowFullScreen",""],["appAnchor","","id","enqu\xeate-sur-lerreur-cannot-resolve-dependency"],["src","/assets/devtools/drag-and-drop.png"],["src","/assets/devtools/partial-graph-modules-view.png"],["src","/assets/devtools/partial-graph-classes-view.png"],["appAnchor","","id","explorateur-de-routes"],["src","/assets/devtools/routes.png"],["appAnchor","","id","sandbox"],["src","/assets/devtools/sandbox.png"],["src","/assets/devtools/sandbox-table.png"],["width","1000","height","565","src",e.wXG`https://www.youtube.com/embed/liSxEN_VXKM`,"title","Lecteur vid\xe9o YouTube","frameBorder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share","allowFullScreen",""],["appAnchor","","id","analyseur-de-performance"],["src","/assets/devtools/bootstrap-performance.png"],["appAnchor","","id","audit"],["src","/assets/devtools/audit.png"],["appAnchor","","id","pr\xe9visualiser-les-fichiers-statiques"]],template:function(n,r){1&n&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Vue d'ensemble"),e.k0s(),e.j41(7,"blockquote",6)(8,"strong"),e.EFF(9,"Astuce"),e.k0s(),e.EFF(10," Ce chapitre couvre l'int\xe9gration de Nest Devtools avec le framework Nest. Si vous recherchez l'application Devtools, veuillez consulter le site Web "),e.j41(11,"a",7),e.EFF(12,"Devtools"),e.k0s(),e.EFF(13,".\n"),e.k0s(),e.j41(14,"p"),e.EFF(15,"Pour commencer \xe0 d\xe9boguer votre application locale, ouvrez le fichier "),e.j41(16,"code"),e.EFF(17,"main.ts"),e.k0s(),e.EFF(18," et assurez-vous de mettre l'attribut "),e.j41(19,"code"),e.EFF(20,"snapshot"),e.k0s(),e.EFF(21," \xe0 "),e.j41(22,"code"),e.EFF(23,"true"),e.k0s(),e.EFF(24," dans l'objet application options, comme suit :"),e.k0s(),e.j41(25,"app-copy-button")(26,"pre")(27,"code",8),e.EFF(28,"\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule, {\n    snapshot: true,\n  });\n  await app.listen(process.env.PORT ?? 3000);\n}\n"),e.k0s()()(),e.j41(29,"p"),e.EFF(30,"Cela demandera au framework de collecter les m\xe9tadonn\xe9es n\xe9cessaires qui permettront \xe0 Nest Devtools de visualiser le graphe de votre application."),e.k0s(),e.j41(31,"p"),e.EFF(32,"Ensuite, installons les d\xe9pendances n\xe9cessaires :"),e.k0s(),e.j41(33,"pre")(34,"code",9),e.EFF(35,"\n$ npm i @nestjs/devtools-integration\n"),e.k0s()(),e.j41(36,"blockquote",10)(37,"strong"),e.EFF(38,"Attention"),e.k0s(),e.EFF(39," Si vous utilisez le paquet "),e.j41(40,"code"),e.EFF(41,"@nestjs/graphql"),e.k0s(),e.EFF(42," dans votre application, assurez-vous d'installer la derni\xe8re version ("),e.j41(43,"code"),e.EFF(44,"npm i @nestjs/graphql@11"),e.k0s(),e.EFF(45,").\n"),e.k0s(),e.j41(46,"p"),e.EFF(47,"Avec cette d\xe9pendance en place, ouvrons le fichier "),e.j41(48,"code"),e.EFF(49,"app.module.ts"),e.k0s(),e.EFF(50," et importons le module "),e.j41(51,"code"),e.EFF(52,"DevtoolsModule"),e.k0s(),e.EFF(53," que nous venons d'installer :"),e.k0s(),e.j41(54,"app-copy-button")(55,"pre")(56,"code",8),e.EFF(57,"\n@Module({\n  imports: [\n    DevtoolsModule.register({\n      http: process.env.NODE_ENV !== 'production',\n    }),\n  ],\n  controllers: [AppController],\n  providers: [AppService],\n})\nexport class AppModule {}\n"),e.k0s()()(),e.j41(58,"blockquote",10)(59,"strong"),e.EFF(60,"Attention"),e.k0s(),e.EFF(61," La raison pour laquelle nous v\xe9rifions la variable d'environnement "),e.j41(62,"code"),e.EFF(63,"NODE_ENV"),e.k0s(),e.EFF(64," ici est que vous ne devriez jamais utiliser ce module en production !\n"),e.k0s(),e.j41(65,"p"),e.EFF(66,"Une fois que le module "),e.j41(67,"code"),e.EFF(68,"DevtoolsModule"),e.k0s(),e.EFF(69," est import\xe9 et que votre application est op\xe9rationnelle ("),e.j41(70,"code"),e.EFF(71,"npm run start:dev"),e.k0s(),e.EFF(72,"), vous devriez pouvoir naviguer vers l'URL "),e.j41(73,"a",7),e.EFF(74,"Devtools"),e.k0s(),e.EFF(75," et voir le graphe instrospectif."),e.k0s(),e.j41(76,"figure"),e.nrm(77,"img",11),e.k0s(),e.j41(78,"blockquote",6)(79,"strong"),e.EFF(80,"Astuce"),e.k0s(),e.EFF(81," Comme vous pouvez le voir sur la capture d'\xe9cran ci-dessus, chaque module se connecte au "),e.j41(82,"code"),e.EFF(83,"InternalCoreModule"),e.k0s(),e.EFF(84,". "),e.j41(85,"code"),e.EFF(86,"InternalCoreModule"),e.k0s(),e.EFF(87," est un module global qui est toujours import\xe9 dans le module racine. Puisqu'il est enregistr\xe9 comme un n\u0153ud global, Nest cr\xe9e automatiquement des liens entre tous les modules et le n\u0153ud "),e.j41(88,"code"),e.EFF(89,"InternalCoreModule"),e.k0s(),e.EFF(90,'. Maintenant, si vous voulez cacher les modules globaux du graphe, vous pouvez utiliser la case \xe0 cocher "'),e.j41(91,"strong"),e.EFF(92,"Cacher les modules globaux"),e.k0s(),e.EFF(93,'" (dans la barre lat\xe9rale).\n'),e.k0s(),e.j41(94,"p"),e.EFF(95,"Comme nous pouvons le voir, "),e.j41(96,"code"),e.EFF(97,"DevtoolsModule"),e.k0s(),e.EFF(98," permet \xe0 votre application d'exposer un serveur HTTP suppl\xe9mentaire (sur le port 8000) que l'application Devtools utilisera pour inspecter votre application."),e.k0s(),e.j41(99,"p"),e.EFF(100,'Pour v\xe9rifier que tout fonctionne comme pr\xe9vu, changez la vue du graphique en "Classes". Vous devriez voir l\'\xe9cran suivant :'),e.k0s(),e.j41(101,"figure"),e.nrm(102,"img",12),e.k0s(),e.j41(103,"p"),e.EFF(104,"Pour mettre l'accent sur un n\u0153ud sp\xe9cifique, cliquez sur le rectangle et le graphique affichera une fen\xeatre contextuelle avec le bouton "),e.j41(105,"strong"),e.EFF(106,'"Focus"'),e.k0s(),e.EFF(107,". Vous pouvez \xe9galement utiliser la barre de recherche (situ\xe9e dans la barre lat\xe9rale) pour trouver un n\u0153ud sp\xe9cifique."),e.k0s(),e.j41(108,"blockquote",6)(109,"strong"),e.EFF(110,"Astuce"),e.k0s(),e.EFF(111," Si vous cliquez sur le bouton "),e.j41(112,"strong"),e.EFF(113,"Inspect"),e.k0s(),e.EFF(114,", l'application vous am\xe8nera \xe0 la page "),e.j41(115,"code"),e.EFF(116,"/debug"),e.k0s(),e.EFF(117," avec ce n\u0153ud sp\xe9cifique s\xe9lectionn\xe9.\n"),e.k0s(),e.j41(118,"figure"),e.nrm(119,"img",13),e.k0s(),e.j41(120,"blockquote",6)(121,"strong"),e.EFF(122,"Astuce"),e.k0s(),e.EFF(123," Pour exporter un graphique en tant qu'image, cliquez sur le bouton "),e.j41(124,"strong"),e.EFF(125,"Export as PNG"),e.k0s(),e.EFF(126," dans le coin droit du graphique.\n"),e.k0s(),e.j41(127,"p"),e.EFF(128,"En utilisant les contr\xf4les de formulaire situ\xe9s dans la barre lat\xe9rale (\xe0 gauche), vous pouvez contr\xf4ler la proximit\xe9 des bords pour, par exemple, visualiser une sous-arborescence d'application sp\xe9cifique :"),e.k0s(),e.j41(129,"figure"),e.nrm(130,"img",14),e.k0s(),e.j41(131,"p"),e.EFF(132,"Cela peut \xeatre particuli\xe8rement utile lorsque vous avez de "),e.j41(133,"strong"),e.EFF(134,"nouveaux d\xe9veloppeurs"),e.k0s(),e.EFF(135," dans votre \xe9quipe et que vous voulez leur montrer comment votre application est structur\xe9e. Vous pouvez \xe9galement utiliser cette fonctionnalit\xe9 pour visualiser un module sp\xe9cifique (par exemple "),e.j41(136,"code"),e.EFF(137,"TasksModule"),e.k0s(),e.EFF(138,") et toutes ses d\xe9pendances, ce qui peut \xeatre utile lorsque vous d\xe9composez une grande application en modules plus petits (par exemple, des micro-services individuels)."),e.k0s(),e.j41(139,"p"),e.EFF(140,"Vous pouvez regarder cette vid\xe9o pour voir la fonction "),e.j41(141,"strong"),e.EFF(142,"Graph Explorer"),e.k0s(),e.EFF(143," en action :"),e.k0s(),e.j41(144,"figure"),e.nrm(145,"iframe",15),e.k0s(),e.j41(146,"h4",16)(147,"span"),e.EFF(148,'Enqu\xeate sur l\'erreur "Cannot resolve dependency"'),e.k0s()(),e.j41(149,"blockquote",6)(150,"strong"),e.EFF(151,"Note"),e.k0s(),e.EFF(152," Cette fonction est prise en charge pour "),e.j41(153,"code"),e.EFF(154,"@nestjs/core"),e.k0s(),e.EFF(155," >= "),e.j41(156,"code"),e.EFF(157,"v9.3.10"),e.k0s(),e.EFF(158,".\n"),e.k0s(),e.j41(159,"p"),e.EFF(160,"Le message d'erreur le plus courant que vous ayez pu voir concerne probablement l'impossibilit\xe9 pour Nest de r\xe9soudre les d\xe9pendances d'un fournisseur. En utilisant Nest Devtools, vous pouvez facilement identifier le probl\xe8me et apprendre \xe0 le r\xe9soudre."),e.k0s(),e.j41(161,"p"),e.EFF(162,"Tout d'abord, ouvrez le fichier "),e.j41(163,"code"),e.EFF(164,"main.ts"),e.k0s(),e.EFF(165," et mettez \xe0 jour l'appel "),e.j41(166,"code"),e.EFF(167,"bootstrap()"),e.k0s(),e.EFF(168," comme suit :"),e.k0s(),e.j41(169,"app-copy-button")(170,"pre")(171,"code",8),e.EFF(172,"\nbootstrap().catch((err) => {\n  fs.writeFileSync('graph.json', PartialGraphHost.toString() ?? '');\n  process.exit(1);\n});\n"),e.k0s()()(),e.j41(173,"p"),e.EFF(174,"Assurez-vous \xe9galement de mettre la valeur "),e.j41(175,"code"),e.EFF(176,"abortOnError"),e.k0s(),e.EFF(177," \xe0 "),e.j41(178,"code"),e.EFF(179,"false"),e.k0s(),e.EFF(180," :"),e.k0s(),e.j41(181,"app-copy-button")(182,"pre")(183,"code",8),e.EFF(184,"\nconst app = await NestFactory.create(AppModule, {\n  snapshot: true,\n  abortOnError: false, // <--- THIS\n});\n"),e.k0s()()(),e.j41(185,"p"),e.EFF(186,"Maintenant, \xe0 chaque fois que votre application \xe9choue \xe0 d\xe9marrer \xe0 cause de l'erreur "),e.j41(187,"strong"),e.EFF(188,'"Cannot resolve dependency "'),e.k0s(),e.EFF(189,", vous trouverez le fichier "),e.j41(190,"code"),e.EFF(191,"graph.json"),e.k0s(),e.EFF(192,' (qui repr\xe9sente un graphe partiel) dans le r\xe9pertoire racine. Vous pouvez alors glisser-d\xe9poser ce fichier dans Devtools (assurez-vous de changer le mode courant de "Interactive" \xe0 "Preview") :'),e.k0s(),e.j41(193,"figure"),e.nrm(194,"img",17),e.k0s(),e.j41(195,"p"),e.EFF(196,"Une fois le t\xe9l\xe9chargement r\xe9ussi, vous devriez voir le graphique et la fen\xeatre de dialogue suivants :"),e.k0s(),e.j41(197,"figure"),e.nrm(198,"img",18),e.k0s(),e.j41(199,"p"),e.EFF(200,"Comme vous pouvez le voir, le module "),e.j41(201,"code"),e.EFF(202,"TasksModule"),e.k0s(),e.EFF(203," en surbrillance est celui que nous devons examiner. De plus, dans la fen\xeatre de dialogue, vous pouvez d\xe9j\xe0 voir des instructions sur la fa\xe7on de r\xe9soudre ce probl\xe8me."),e.k0s(),e.j41(204,"p"),e.EFF(205,'Si nous passons \xe0 la vue "Classes", c\'est ce que nous verrons :'),e.k0s(),e.j41(206,"figure"),e.nrm(207,"img",19),e.k0s(),e.j41(208,"p"),e.EFF(209,"Ce graphique illustre que le "),e.j41(210,"code"),e.EFF(211,"DiagnosticsService"),e.k0s(),e.EFF(212," que nous voulons injecter dans le "),e.j41(213,"code"),e.EFF(214,"TasksService"),e.k0s(),e.EFF(215," n'a pas \xe9t\xe9 trouv\xe9 dans le contexte du module "),e.j41(216,"code"),e.EFF(217,"TasksModule"),e.k0s(),e.EFF(218,", et nous devrions probablement importer le "),e.j41(219,"code"),e.EFF(220,"DiagnosticsModule"),e.k0s(),e.EFF(221," dans le module "),e.j41(222,"code"),e.EFF(223,"TasksModule"),e.k0s(),e.EFF(224," pour r\xe9soudre ce probl\xe8me !"),e.k0s(),e.j41(225,"h4",20)(226,"span"),e.EFF(227,"Explorateur de routes"),e.k0s()(),e.j41(228,"p"),e.EFF(229,"Lorsque vous naviguez vers la page "),e.j41(230,"strong"),e.EFF(231,"Routes explorer"),e.k0s(),e.EFF(232,", vous devriez voir tous les points d'entr\xe9e enregistr\xe9s :"),e.k0s(),e.j41(233,"figure"),e.nrm(234,"img",21),e.k0s(),e.j41(235,"blockquote",6)(236,"strong"),e.EFF(237,"Astuce"),e.k0s(),e.EFF(238," Cette page pr\xe9sente non seulement les routes HTTP, mais aussi tous les autres points d'entr\xe9e (par exemple, WebSockets, gRPC, r\xe9solveurs GraphQL, etc.)\n"),e.k0s(),e.j41(239,"p"),e.EFF(240,"Les points d'entr\xe9e sont regroup\xe9s en fonction de leurs contr\xf4leurs h\xf4tes. Vous pouvez \xe9galement utiliser la barre de recherche pour trouver un point d'entr\xe9e sp\xe9cifique."),e.k0s(),e.j41(241,"p"),e.EFF(242,"Si vous cliquez sur un point d'entr\xe9e sp\xe9cifique, "),e.j41(243,"strong"),e.EFF(244,"un graphique de flux"),e.k0s(),e.EFF(245," s'affiche. Ce graphique montre le flux d'ex\xe9cution du point d'entr\xe9e (par exemple, les gardiens, les intercepteurs, les tuyaux, etc. li\xe9s \xe0 cette route). Ceci est particuli\xe8rement utile lorsque vous voulez comprendre comment le cycle requ\xeate/r\xe9ponse se pr\xe9sente pour une route sp\xe9cifique, ou lorsque vous cherchez \xe0 savoir pourquoi un garde/intercepteur/pipe sp\xe9cifique n'est pas ex\xe9cut\xe9."),e.k0s(),e.j41(246,"h4",22)(247,"span"),e.EFF(248,"Sandbox"),e.k0s()(),e.j41(249,"p"),e.EFF(250,"Pour ex\xe9cuter du code JavaScript \xe0 la vol\xe9e et interagir avec votre application en temps r\xe9el, rendez-vous sur la page "),e.j41(251,"strong"),e.EFF(252,"Sandbox"),e.k0s(),e.EFF(253," :"),e.k0s(),e.j41(254,"figure"),e.nrm(255,"img",23),e.k0s(),e.j41(256,"p"),e.EFF(257,"Le terrain de jeu peut \xeatre utilis\xe9 pour tester et d\xe9bugger les points d'extr\xe9mit\xe9 de l'API en "),e.j41(258,"strong"),e.EFF(259,"temps r\xe9el"),e.k0s(),e.EFF(260,", ce qui permet aux d\xe9veloppeurs d'identifier et de corriger rapidement les probl\xe8mes sans utiliser, par exemple, un client HTTP. Nous pouvons \xe9galement contourner la couche d'authentification, de sorte que nous n'avons plus besoin de cette \xe9tape suppl\xe9mentaire de connexion, ni m\xeame d'un compte d'utilisateur sp\xe9cial \xe0 des fins de test. Pour les applications \xe9v\xe9nementielles, nous pouvons \xe9galement d\xe9clencher des \xe9v\xe9nements directement \xe0 partir du terrain de jeu et voir comment l'application y r\xe9agit."),e.k0s(),e.j41(261,"p"),e.EFF(262,"Tout ce qui est enregistr\xe9 est transf\xe9r\xe9 vers la console de l'aire de jeu, afin que nous puissions facilement voir ce qui se passe."),e.k0s(),e.j41(263,"p"),e.EFF(264,"Il suffit d'ex\xe9cuter le code "),e.j41(265,"strong"),e.EFF(266,"\xe0 la vol\xe9e"),e.k0s(),e.EFF(267," et de voir les r\xe9sultats instantan\xe9ment, sans avoir \xe0 reconstruire l'application et \xe0 red\xe9marrer le serveur."),e.k0s(),e.j41(268,"figure"),e.nrm(269,"img",24),e.k0s(),e.j41(270,"blockquote",6)(271,"strong"),e.EFF(272,"Astuce"),e.k0s(),e.EFF(273," Pour afficher un tableau d'objets, utilisez la fonction "),e.j41(274,"code"),e.EFF(275,"console.table()"),e.k0s(),e.EFF(276," (ou simplement "),e.j41(277,"code"),e.EFF(278,"table()"),e.k0s(),e.EFF(279,").\n"),e.k0s(),e.j41(280,"p"),e.EFF(281,"Vous pouvez regarder cette vid\xe9o pour voir la fonctionnalit\xe9 "),e.j41(282,"strong"),e.EFF(283,"Interactive Playground"),e.k0s(),e.EFF(284," en action :"),e.k0s(),e.j41(285,"figure"),e.nrm(286,"iframe",25),e.k0s(),e.j41(287,"h4",26)(288,"span"),e.EFF(289,"Analyseur de performance"),e.k0s()(),e.j41(290,"p"),e.EFF(291,"Pour voir une liste de tous les n\u0153uds de classe (contr\xf4leurs, fournisseurs, am\xe9liorateurs, etc.) et leurs temps d'instanciation correspondants, naviguez vers la page "),e.j41(292,"strong"),e.EFF(293,"Bootstrap performance"),e.k0s(),e.EFF(294," :"),e.k0s(),e.j41(295,"figure"),e.nrm(296,"img",27),e.k0s(),e.j41(297,"p"),e.EFF(298,"Cette page est particuli\xe8rement utile lorsque vous souhaitez identifier les parties les plus lentes du processus de d\xe9marrage de votre application (par exemple, lorsque vous souhaitez optimiser le temps de d\xe9marrage de l'application, ce qui est crucial pour, par exemple, les environnements sans serveur)."),e.k0s(),e.j41(299,"h4",28)(300,"span"),e.EFF(301,"Audit"),e.k0s()(),e.j41(302,"p"),e.EFF(303,"Pour voir l'audit g\xe9n\xe9r\xe9 automatiquement - les erreurs, les avertissements et les conseils que l'application a \xe9mis lors de l'analyse de votre graphe s\xe9rialis\xe9, naviguez jusqu'\xe0 la page "),e.j41(304,"strong"),e.EFF(305,"Audit"),e.k0s(),e.EFF(306," :"),e.k0s(),e.j41(307,"figure"),e.nrm(308,"img",29),e.k0s(),e.j41(309,"blockquote",6)(310,"strong"),e.EFF(311,"Astuce"),e.k0s(),e.EFF(312," La capture d'\xe9cran ci-dessus ne montre pas toutes les r\xe8gles d'audit disponibles.\n"),e.k0s(),e.j41(313,"p"),e.EFF(314,"Cette page est tr\xe8s utile lorsque vous souhaitez identifier des probl\xe8mes potentiels dans votre application."),e.k0s(),e.j41(315,"h4",30)(316,"span"),e.EFF(317,"Pr\xe9visualiser les fichiers statiques"),e.k0s()(),e.j41(318,"p"),e.EFF(319,"Pour enregistrer un graphique s\xe9rialis\xe9 dans un fichier, utilisez le code suivant :"),e.k0s(),e.j41(320,"app-copy-button")(321,"pre")(322,"code",8),e.EFF(323,"\nawait app.listen(process.env.PORT ?? 3000); // OR await app.init()\nfs.writeFileSync('./graph.json', app.get(SerializedGraph).toString());\n"),e.k0s()()(),e.j41(324,"blockquote",6)(325,"strong"),e.EFF(326,"Astuce"),e.k0s(),e.j41(327,"code"),e.EFF(328,"SerializedGraph"),e.k0s(),e.EFF(329," est export\xe9 du package "),e.j41(330,"code"),e.EFF(331,"@nestjs/core"),e.k0s(),e.EFF(332,".\n"),e.k0s(),e.j41(333,"p"),e.EFF(334,"Vous pouvez ensuite glisser-d\xe9poser/charger ce fichier :"),e.k0s(),e.j41(335,"figure"),e.nrm(336,"img",17),e.k0s(),e.j41(337,"p"),e.EFF(338,"Cette fonction est utile lorsque vous souhaitez partager votre graphique avec quelqu'un d'autre (un coll\xe8gue, par exemple) ou lorsque vous souhaitez l'analyser hors ligne."),e.k0s()())},dependencies:[a.a,l.z],encapsulation:2,changeDetection:0})}return s})(),data:{title:"Devtools - Vue d'ensemble"}},{path:"ci-cd-integration",component:(()=>{class s extends i.y{static \u0275fac=(()=>{let u;return function(r){return(u||(u=e.xGo(s)))(r||s)}})();static \u0275cmp=e.VBU({type:s,selectors:[["app-devtools-ci-cd"]],features:[e.Vt3],decls:286,vars:12,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/Lou8is/docs.nestjs.fr/edit/main/content/devtools/ci-cd.md","aria-label","Proposer des modifications","title","Proposer des modifications"],[1,"fas","fa-edit"],["id","int\xe9gration-cicd"],[1,"info"],["rel","nofollow","target","_blank","href","https://devtools.nestjs.com"],["width","1000","height","565","src",e.wXG`https://www.youtube.com/embed/r5RXcBrnEQ8`,"title","Lecteur vid\xe9o YouTube","frameBorder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share","allowFullScreen",""],["appAnchor","","id","publication-de-graphes"],[1,"language-typescript"],["src","/assets/devtools/graph-published-terminal.png"],["src","/assets/devtools/project.png"],["appAnchor","","id","rapports"],["src","/assets/devtools/report.png"],["appAnchor","","id","pr\xe9visualisation-du-build"],["src","/assets/devtools/nodes-selection.png"],["appAnchor","","id","int\xe9grations--github-actions"],[1,"language-yaml"],["rel","nofollow","target","_blank","href","https://docs.github.com/en/actions/security-guides/encrypted-secrets#creating-encrypted-secrets-for-a-repository"],["rel","nofollow","target","_blank","href","https://devtools.nestjs.com/settings/manage-api-keys"],["src","/assets/devtools/integrate-github-app.png"],["src","/assets/devtools/actions-preview.png"],["appAnchor","","id","int\xe9grations--gitlab-pipelines"],["appAnchor","","id","autres-outils-cicd"],["rel","nofollow","target","_blank","href","https://bitbucket.org/product/features/pipelines"],["rel","nofollow","target","_blank","href","https://circleci.com/"],["rel","nofollow","target","_blank","href","https://circleci.com/docs/variables/#built-in-environment-variables"],["rel","nofollow","target","_blank","href","https://support.atlassian.com/bitbucket-cloud/docs/variables-and-secrets/"]],template:function(n,r){1&n&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Int\xe9gration CI/CD"),e.k0s(),e.j41(7,"blockquote",6)(8,"strong"),e.EFF(9,"Astuce"),e.k0s(),e.EFF(10," Ce chapitre couvre l'int\xe9gration de Nest Devtools avec le framework Nest. Si vous recherchez l'application Devtools, veuillez consulter le site Web "),e.j41(11,"a",7),e.EFF(12,"Devtools"),e.k0s(),e.EFF(13,".\n"),e.k0s(),e.j41(14,"p"),e.EFF(15,"L'int\xe9gration CI/CD est disponible pour les utilisateurs ayant le plan "),e.j41(16,"strong"),e.EFF(17,"Enterprise"),e.k0s(),e.EFF(18,"."),e.k0s(),e.j41(19,"p"),e.EFF(20,"Vous pouvez regarder cette vid\xe9o pour savoir pourquoi et comment l'int\xe9gration CI/CD peut vous aider :"),e.k0s(),e.j41(21,"figure"),e.nrm(22,"iframe",8),e.k0s(),e.j41(23,"h4",9)(24,"span"),e.EFF(25,"Publication de graphes"),e.k0s()(),e.j41(26,"p"),e.EFF(27,"Commen\xe7ons par configurer le fichier d'amor\xe7age de l'application ("),e.j41(28,"code"),e.EFF(29,"main.ts"),e.k0s(),e.EFF(30,") pour utiliser la classe "),e.j41(31,"code"),e.EFF(32,"GraphPublisher"),e.k0s(),e.EFF(33," (export\xe9e depuis "),e.j41(34,"code"),e.EFF(35,"@nestjs/devtools-integration"),e.k0s(),e.EFF(36," - voir le chapitre pr\xe9c\xe9dent pour plus de d\xe9tails), comme suit :"),e.k0s(),e.j41(37,"app-copy-button")(38,"pre")(39,"code",10),e.EFF(40,'\nasync function bootstrap() {\n  const shouldPublishGraph = process.env.PUBLISH_GRAPH === "true";\n\n  const app = await NestFactory.create(AppModule, {\n    snapshot: true,\n    preview: shouldPublishGraph,\n  });\n\n  if (shouldPublishGraph) {\n    await app.init();\n\n    const publishOptions = { ... } // NOTE : cet objet d\'options varie en fonction du fournisseur CI/CD que vous utilisez.\n    const graphPublisher = new GraphPublisher(app);\n    await graphPublisher.publish(publishOptions);\n\n    await app.close();\n  } else {\n    await app.listen(process.env.PORT ?? 3000);\n  }\n}\n'),e.k0s()()(),e.j41(41,"p"),e.EFF(42,"Comme nous pouvons le voir, nous utilisons le "),e.j41(43,"code"),e.EFF(44,"GraphPublisher"),e.k0s(),e.EFF(45," ici pour publier notre graphe s\xe9rialis\xe9 dans le registre centralis\xe9. La variable "),e.j41(46,"code"),e.EFF(47,"PUBLISH_GRAPH"),e.k0s(),e.EFF(48," est une variable d'environnement personnalis\xe9e qui nous permet de contr\xf4ler si le graphe doit \xeatre publi\xe9 (workflow CI/CD), ou non (d\xe9marrage normal de l'application). De plus, nous mettons l'attribut "),e.j41(49,"code"),e.EFF(50,"preview"),e.k0s(),e.EFF(51," ici \xe0 "),e.j41(52,"code"),e.EFF(53,"true"),e.k0s(),e.EFF(54,". Avec ce flag activ\xe9, notre application va d\xe9marrer en mode preview - ce qui signifie que les constructeurs (et les hooks de cycle de vie) de tous les contr\xf4leurs, am\xe9liorateurs et fournisseurs de notre application ne seront pas ex\xe9cut\xe9s. Note - ce n'est pas "),e.j41(55,"strong"),e.EFF(56,"n\xe9cessaire"),e.k0s(),e.EFF(57,", mais rend les choses plus simples pour nous puisque dans ce cas nous n'aurons pas vraiment \xe0 nous connecter \xe0 la base de donn\xe9es etc. lors de l'ex\xe9cution de notre application dans le pipeline CI/CD."),e.k0s(),e.j41(58,"p"),e.EFF(59,"L'objet "),e.j41(60,"code"),e.EFF(61,"publishOptions"),e.k0s(),e.EFF(62," varie en fonction du fournisseur CI/CD que vous utilisez. Nous vous fournirons des instructions pour les fournisseurs CI/CD les plus populaires dans les sections suivantes."),e.k0s(),e.j41(63,"p"),e.EFF(64,"Une fois le graphique publi\xe9 avec succ\xe8s, vous verrez la sortie suivante dans votre vue du flux de travail :"),e.k0s(),e.j41(65,"figure"),e.nrm(66,"img",11),e.k0s(),e.j41(67,"p"),e.EFF(68,"Chaque fois que notre graphique est publi\xe9, nous devrions voir une nouvelle entr\xe9e dans la page correspondante du projet :"),e.k0s(),e.j41(69,"figure"),e.nrm(70,"img",12),e.k0s(),e.j41(71,"h4",13)(72,"span"),e.EFF(73,"Rapports"),e.k0s()(),e.j41(74,"p"),e.EFF(75,"Devtools g\xe9n\xe8re un rapport pour chaque build "),e.j41(76,"strong"),e.EFF(77,"SI"),e.k0s(),e.EFF(78," il y a un snapshot correspondant d\xe9j\xe0 stock\xe9 dans le registre centralis\xe9. Ainsi, par exemple, si vous cr\xe9ez un PR contre la branche "),e.j41(79,"code"),e.EFF(80,"master"),e.k0s(),e.EFF(81," pour laquelle le graphe a d\xe9j\xe0 \xe9t\xe9 publi\xe9 - alors l'application sera capable de d\xe9tecter les diff\xe9rences et de g\xe9n\xe9rer un rapport. Dans le cas contraire, le rapport ne sera pas g\xe9n\xe9r\xe9."),e.k0s(),e.j41(82,"p"),e.EFF(83,"Pour consulter les rapports, naviguez jusqu'\xe0 la page correspondante du projet (voir organisations)."),e.k0s(),e.j41(84,"figure"),e.nrm(85,"img",14),e.k0s(),e.j41(86,"p"),e.EFF(87,"Ceci est particuli\xe8rement utile pour identifier les changements qui auraient pu passer inaper\xe7us lors des revues de code. Par exemple, supposons que quelqu'un ait modifi\xe9 la port\xe9e d'un "),e.j41(88,"strong"),e.EFF(89,"fournisseur profond\xe9ment imbriqu\xe9"),e.k0s(),e.EFF(90,". Ce changement peut ne pas \xeatre imm\xe9diatement \xe9vident pour le r\xe9viseur, mais avec Devtools, nous pouvons facilement rep\xe9rer de tels changements et nous assurer qu'ils sont intentionnels. Ou si nous supprimons une garde d'un point de terminaison sp\xe9cifique, il appara\xeetra comme affect\xe9 dans le rapport. Or, si nous n'avions pas de tests d'int\xe9gration ou de tests e2e pour cette route, nous pourrions ne pas remarquer qu'elle n'est plus prot\xe9g\xe9e, et lorsque nous le ferons, il sera peut-\xeatre trop tard."),e.k0s(),e.j41(91,"p"),e.EFF(92,"De m\xeame, si nous travaillons sur une "),e.j41(93,"strong"),e.EFF(94,"grande base de code"),e.k0s(),e.EFF(95," et que nous modifions un module pour qu'il soit global, nous verrons combien d'ar\xeates ont \xe9t\xe9 ajout\xe9es au graphe, ce qui - dans la plupart des cas - est le signe que nous faisons quelque chose de mal."),e.k0s(),e.j41(96,"h4",15)(97,"span"),e.EFF(98,"Pr\xe9visualisation du build"),e.k0s()(),e.j41(99,"p"),e.EFF(100,"Pour chaque graphique publi\xe9, nous pouvons remonter dans le temps et pr\xe9visualiser son aspect ant\xe9rieur en cliquant sur le bouton "),e.j41(101,"strong"),e.EFF(102,"Preview"),e.k0s(),e.EFF(103,". De plus, si le rapport a \xe9t\xe9 g\xe9n\xe9r\xe9, nous devrions voir les diff\xe9rences mises en \xe9vidence sur notre graphique :"),e.k0s(),e.j41(104,"ul")(105,"li"),e.EFF(106,"les n\u0153uds verts repr\xe9sentent les \xe9l\xe9ments ajout\xe9s"),e.k0s(),e.j41(107,"li"),e.EFF(108,"les n\u0153uds en blanc clair repr\xe9sentent les \xe9l\xe9ments mis \xe0 jour"),e.k0s(),e.j41(109,"li"),e.EFF(110,"les n\u0153uds rouges repr\xe9sentent les \xe9l\xe9ments supprim\xe9s"),e.k0s()(),e.j41(111,"p"),e.EFF(112,"Voir la capture d'\xe9cran ci-dessous :"),e.k0s(),e.j41(113,"figure"),e.nrm(114,"img",16),e.k0s(),e.j41(115,"p"),e.EFF(116,"La possibilit\xe9 de remonter dans le temps vous permet d'enqu\xeater et de r\xe9soudre le probl\xe8me en comparant le graphique actuel avec le pr\xe9c\xe9dent. Selon la fa\xe7on dont vous avez configur\xe9 les choses, chaque pull request (ou m\xeame chaque commit) aura un snapshot correspondant dans le registre, de sorte que vous pouvez facilement remonter dans le temps et voir ce qui a chang\xe9. Consid\xe9rez Devtools comme un Git, mais avec une compr\xe9hension de la fa\xe7on dont Nest construit votre graphe d'application, et avec la capacit\xe9 de "),e.j41(117,"strong"),e.EFF(118,"visualiser"),e.k0s(),e.EFF(119," ce graphe."),e.k0s(),e.j41(120,"h4",17)(121,"span"),e.EFF(122,"Int\xe9grations : GitHub Actions"),e.k0s()(),e.j41(123,"p"),e.EFF(124,"Commen\xe7ons par cr\xe9er un nouveau workflow GitHub dans le r\xe9pertoire "),e.j41(125,"code"),e.EFF(126,".github/workflows"),e.k0s(),e.EFF(127," de notre projet et appelons-le, par exemple, "),e.j41(128,"code"),e.EFF(129,"publish-graph.yml"),e.k0s(),e.EFF(130,". Dans ce fichier, utilisons la d\xe9finition suivante :"),e.k0s(),e.j41(131,"pre")(132,"code",18),e.EFF(133),e.k0s()(),e.j41(134,"p"),e.EFF(135,"Id\xe9alement, la variable d'environnement "),e.j41(136,"code"),e.EFF(137,"DEVTOOLS_API_KEY"),e.k0s(),e.EFF(138," devrait \xeatre r\xe9cup\xe9r\xe9e \xe0 partir de GitHub Secrets, pour en savoir plus "),e.j41(139,"a",19),e.EFF(140,"ici"),e.k0s(),e.EFF(141,"."),e.k0s(),e.j41(142,"p"),e.EFF(143,"Ce workflow sera ex\xe9cut\xe9 pour chaque pull request qui cible la branche "),e.j41(144,"code"),e.EFF(145,"master"),e.k0s(),e.EFF(146," OU dans le cas o\xf9 il y a un commit direct vers la branche "),e.j41(147,"code"),e.EFF(148,"master"),e.k0s(),e.EFF(149,". N'h\xe9sitez pas \xe0 adapter cette configuration aux besoins de votre projet. Ce qui est essentiel ici est de fournir les variables d'environnement n\xe9cessaires \xe0 notre classe "),e.j41(150,"code"),e.EFF(151,"GraphPublisher"),e.k0s(),e.EFF(152," (pour qu'elle s'ex\xe9cute)."),e.k0s(),e.j41(153,"p"),e.EFF(154,"Cependant, il y a une variable qui doit \xeatre mise \xe0 jour avant que nous puissions commencer \xe0 utiliser ce flux de travail - "),e.j41(155,"code"),e.EFF(156,"DEVTOOLS_API_KEY"),e.k0s(),e.EFF(157,". Nous pouvons g\xe9n\xe9rer une cl\xe9 API d\xe9di\xe9e \xe0 notre projet sur votre "),e.j41(158,"a",20),e.EFF(159,"compte Devtools"),e.k0s(),e.EFF(160,"."),e.k0s(),e.j41(161,"p"),e.EFF(162,"Enfin, naviguons \xe0 nouveau vers le fichier "),e.j41(163,"code"),e.EFF(164,"main.ts"),e.k0s(),e.EFF(165," et mettons \xe0 jour l'objet "),e.j41(166,"code"),e.EFF(167,"publishOptions"),e.k0s(),e.EFF(168," que nous avons pr\xe9c\xe9demment laiss\xe9 vide."),e.k0s(),e.j41(169,"app-copy-button")(170,"pre")(171,"code",10),e.EFF(172,"\nconst publishOptions = {\n  apiKey: process.env.DEVTOOLS_API_KEY,\n  repository: process.env.REPOSITORY_NAME,\n  owner: process.env.GITHUB_REPOSITORY_OWNER,\n  sha: process.env.COMMIT_SHA,\n  target: process.env.TARGET_SHA,\n  trigger: process.env.GITHUB_BASE_REF ? 'pull' : 'push',\n  branch: process.env.BRANCH_NAME,\n};\n"),e.k0s()()(),e.j41(173,"p"),e.EFF(174,"Pour une meilleure exp\xe9rience de d\xe9veloppement, assurez-vous d'int\xe9grer l'application "),e.j41(175,"strong"),e.EFF(176,"GitHub"),e.k0s(),e.EFF(177," pour votre projet en cliquant sur le bouton \"Int\xe9grer l'application GitHub\" (voir la capture d'\xe9cran ci-dessous). Remarque : cette op\xe9ration n'est pas obligatoire."),e.k0s(),e.j41(178,"figure"),e.nrm(179,"img",21),e.k0s(),e.j41(180,"p"),e.EFF(181,"Gr\xe2ce \xe0 cette int\xe9gration, vous serez en mesure de voir l'\xe9tat du processus de pr\xe9visualisation/de g\xe9n\xe9ration de rapport directement dans votre demande d'extraction :"),e.k0s(),e.j41(182,"figure"),e.nrm(183,"img",22),e.k0s(),e.j41(184,"h4",23)(185,"span"),e.EFF(186,"Int\xe9grations : Gitlab Pipelines"),e.k0s()(),e.j41(187,"p"),e.EFF(188,"Commen\xe7ons par cr\xe9er un nouveau fichier de configuration Gitlab CI dans le r\xe9pertoire racine de notre projet et appelons-le, par exemple, "),e.j41(189,"code"),e.EFF(190,".gitlab-ci.yml"),e.k0s(),e.EFF(191,". Dans ce fichier, utilisons la d\xe9finition suivante :"),e.k0s(),e.j41(192,"app-copy-button")(193,"pre")(194,"code",10),e.EFF(195,"\nconst publishOptions = {\n  apiKey: process.env.DEVTOOLS_API_KEY,\n  repository: process.env.REPOSITORY_NAME,\n  owner: process.env.GITHUB_REPOSITORY_OWNER,\n  sha: process.env.COMMIT_SHA,\n  target: process.env.TARGET_SHA,\n  trigger: process.env.GITHUB_BASE_REF ? 'pull' : 'push',\n  branch: process.env.BRANCH_NAME,\n};\n"),e.k0s()()(),e.j41(196,"blockquote",6)(197,"strong"),e.EFF(198,"Astuce"),e.k0s(),e.EFF(199," Id\xe9alement, la variable d'environnement "),e.j41(200,"code"),e.EFF(201,"DEVTOOLS_API_KEY"),e.k0s(),e.EFF(202," devrait \xeatre r\xe9cup\xe9r\xe9e \xe0 partir des secrets.\n"),e.k0s(),e.j41(203,"p"),e.EFF(204,"Ce workflow sera ex\xe9cut\xe9 pour chaque pull request qui cible la branche "),e.j41(205,"code"),e.EFF(206,"master"),e.k0s(),e.EFF(207," OU dans le cas o\xf9 il y a un commit direct vers la branche "),e.j41(208,"code"),e.EFF(209,"master"),e.k0s(),e.EFF(210,". N'h\xe9sitez pas \xe0 adapter cette configuration aux besoins de votre projet. Ce qui est essentiel ici est que nous fournissons les variables d'environnement n\xe9cessaires \xe0 notre classe "),e.j41(211,"code"),e.EFF(212,"GraphPublisher"),e.k0s(),e.EFF(213," (pour qu'elle s'ex\xe9cute)."),e.k0s(),e.j41(214,"p"),e.EFF(215,"Cependant, il y a une variable (dans cette d\xe9finition de workflow) qui doit \xeatre mise \xe0 jour avant que nous puissions commencer \xe0 utiliser ce workflow - "),e.j41(216,"code"),e.EFF(217,"DEVTOOLS_API_KEY"),e.k0s(),e.EFF(218,". Nous pouvons g\xe9n\xe9rer une cl\xe9 API d\xe9di\xe9e \xe0 notre projet sur votre compte Devtools."),e.k0s(),e.j41(219,"p"),e.EFF(220,"Enfin, naviguons \xe0 nouveau vers le fichier "),e.j41(221,"code"),e.EFF(222,"main.ts"),e.k0s(),e.EFF(223," et mettons \xe0 jour l'objet "),e.j41(224,"code"),e.EFF(225,"publishOptions"),e.k0s(),e.EFF(226," que nous avons pr\xe9c\xe9demment laiss\xe9 vide."),e.k0s(),e.j41(227,"pre")(228,"code",18),e.EFF(229,'\nimage: node:16\n\nstages:\n  - build\n\ncache:\n  key:\n    files:\n      - package-lock.json\n  paths:\n    - node_modules/\n\nworkflow:\n  rules:\n    - if: $CI_PIPELINE_SOURCE == "merge_request_event"\n      when: always\n    - if: $CI_COMMIT_BRANCH == "master" && $CI_PIPELINE_SOURCE == "push"\n      when: always\n    - when: never\n\ninstall_dependencies:\n  stage: build\n  script:\n    - npm ci\n\npublish_graph:\n  stage: build\n  needs:\n    - install_dependencies\n  script: npm run start\n  variables:\n    PUBLISH_GRAPH: \'true\'\n    DEVTOOLS_API_KEY: \'CHANGE_THIS_TO_YOUR_API_KEY\'\n'),e.k0s()(),e.j41(230,"h4",24)(231,"span"),e.EFF(232,"Autres outils CI/CD"),e.k0s()(),e.j41(233,"p"),e.EFF(234,"L'int\xe9gration CI/CD de Nest Devtools peut \xeatre utilis\xe9e avec n'importe quel outil CI/CD de votre choix (par exemple, "),e.j41(235,"a",25),e.EFF(236,"Bitbucket Pipelines"),e.k0s(),e.EFF(237," , "),e.j41(238,"a",26),e.EFF(239,"CircleCI"),e.k0s(),e.EFF(240,", etc), donc ne vous sentez pas limit\xe9 aux fournisseurs d\xe9crits ici."),e.k0s(),e.j41(241,"p"),e.EFF(242,"Regardez la configuration de l'objet "),e.j41(243,"code"),e.EFF(244,"publishOptions"),e.k0s(),e.EFF(245," suivant pour comprendre quelles informations sont requises pour publier le graphe pour un commit/build/PR donn\xe9."),e.k0s(),e.j41(246,"app-copy-button")(247,"pre")(248,"code",10),e.EFF(249,"\nconst publishOptions = {\n  apiKey: process.env.DEVTOOLS_API_KEY,\n  repository: process.env.CI_PROJECT_NAME,\n  owner: process.env.CI_PROJECT_ROOT_NAMESPACE,\n  sha: process.env.CI_COMMIT_SHA,\n  target: process.env.CI_MERGE_REQUEST_DIFF_BASE_SHA,\n  trigger: process.env.CI_MERGE_REQUEST_DIFF_BASE_SHA ? 'pull' : 'push',\n  branch: process.env.CI_COMMIT_BRANCH ?? process.env.CI_MERGE_REQUEST_SOURCE_BRANCH_NAME,\n};\n"),e.k0s()()(),e.j41(250,"p"),e.EFF(251,"La plupart de ces informations sont fournies par des variables d'environnement int\xe9gr\xe9es \xe0 CI/CD (voir "),e.j41(252,"a",27),e.EFF(253,"CircleCI built-in environment list"),e.k0s(),e.EFF(254," et "),e.j41(255,"a",28),e.EFF(256,"Bitbucket variables"),e.k0s(),e.EFF(257," )."),e.k0s(),e.j41(258,"p"),e.EFF(259,"En ce qui concerne la configuration du pipeline pour la publication des graphes, nous recommandons d'utiliser les d\xe9clencheurs suivants :"),e.k0s(),e.j41(260,"ul")(261,"li"),e.EFF(262,"\xe9v\xe9nement "),e.j41(263,"code"),e.EFF(264,"push"),e.k0s(),e.EFF(265," - seulement si la branche courante repr\xe9sente un environnement de d\xe9ploiement, par exemple "),e.j41(266,"code"),e.EFF(267,"master"),e.k0s(),e.EFF(268,", "),e.j41(269,"code"),e.EFF(270,"main"),e.k0s(),e.EFF(271,", "),e.j41(272,"code"),e.EFF(273,"staging"),e.k0s(),e.EFF(274,", "),e.j41(275,"code"),e.EFF(276,"production"),e.k0s(),e.EFF(277,", etc."),e.k0s(),e.j41(278,"li"),e.EFF(279,"\xe9v\xe9nement "),e.j41(280,"code"),e.EFF(281,"pull request"),e.k0s(),e.EFF(282," - toujours, ou lorsque la "),e.j41(283,"strong"),e.EFF(284,"branche cible"),e.k0s(),e.EFF(285," repr\xe9sente un environnement de d\xe9ploiement (voir ci-dessus)"),e.k0s()()()),2&n&&(e.R7$(133),e.xRd(["\nname: Devtools\n\non:\n  push:\n    branches:\n      - master\n  pull_request:\n    branches:\n      - '*'\n\njobs:\n  publish:\n    if: github.actor!= 'dependabot[bot]'\n    name: Publish graph\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: '16'\n          cache: 'npm'\n      - name: Install dependencies\n        run: npm ci\n      - name: Setup Environment (PR)\n        if: ","${{"," github.event_name == 'pull_request' ","}}",'\n        shell: bash\n        run: |\n          echo "COMMIT_SHA=',"${{"," github.event.pull_request.head.sha ","}}",'" >>\\${GITHUB_ENV}\n      - name: Setup Environment (Push)\n        if: ',"${{"," github.event_name == 'push' ","}}",'\n        shell: bash\n        run: |\n          echo "COMMIT_SHA=\\${GITHUB_SHA}" >> \\${GITHUB_ENV}\n      - name: Publish\n        run: PUBLISH_GRAPH=true npm run start\n        env:\n          DEVTOOLS_API_KEY: CHANGE_THIS_TO_YOUR_API_KEY\n          REPOSITORY_NAME: ',"${{"," github.event.repository.name ","}}","\n          BRANCH_NAME: ","${{"," github.head_ref || github.ref_name ","}}","\n          TARGET_SHA: ","${{"," github.event.pull_request.base.sha ","}}","\n"]))},dependencies:[a.a,l.z],encapsulation:2,changeDetection:0})}return s})(),data:{title:"Devtools - Int\xe9gration CI/CD"}}];let d=(()=>{class s{static \u0275fac=function(n){return new(n||s)};static \u0275mod=e.$C({type:s});static \u0275inj=e.G2t({imports:[p.MD,E.G,c.iI.forChild(F)]})}return s})()}}]);