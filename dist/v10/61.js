"use strict";(self.webpackChunkdocs_nestjs_com=self.webpackChunkdocs_nestjs_com||[]).push([[61],{7061:(S,c,r)=>{r.r(c),r.d(c,{OpenApiModule:()=>C});var F=r(177),p=r(685),d=r(445),u=r(8050),e=r(4438),a=r(4819),i=r(2469);let E=(()=>{class t extends u.y{static \u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-cli-plugin"]],features:[e.Vt3],decls:448,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/Lou8is/docs.nestjs.fr/edit/main/content/openapi/cli-plugin.md","aria-label","Proposer des modifications","title","Proposer des modifications"],[1,"fas","fa-edit"],["id","plugin-cli"],["rel","nofollow","target","_blank","href","https://www.typescriptlang.org/docs/handbook/decorators.html"],[1,"info"],["appAnchor","","id","vue-densemble"],[1,"language-typescript"],["href","/openapi/cli-plugin#utiliser-le-plugin-cli"],["routerLink","/openapi/mapped-types"],["appAnchor","","id","introspection-des-commentaires"],["appAnchor","","id","utiliser-le-plugin-cli"],["routerLink","/cli/overview"],[1,"language-javascript"],["appAnchor","","id","constructeur-swc"],["href","/recipes/swc#v%C3%A9rification-de-type"],[1,"language-bash"],["href","/recipes/swc#monorepo-et-plugins-cli"],["appAnchor","","id","int\xe9gration-avec-ts-jest-tests-e2e"],[1,"language-json"],["appAnchor","","id","d\xe9pannage-de-jest-tests-e2e"]],template:function(s,o){1&s&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Plugin CLI"),e.k0s(),e.j41(7,"p"),e.EFF(8,"Le syst\xe8me de r\xe9flexion sur les m\xe9tadonn\xe9es de "),e.j41(9,"a",6),e.EFF(10,"TypeScript"),e.k0s(),e.EFF(11," pr\xe9sente plusieurs limites qui l'emp\xeachent, par exemple, de d\xe9terminer les propri\xe9t\xe9s d'une classe ou de reconna\xeetre si une propri\xe9t\xe9 donn\xe9e est facultative ou obligatoire. Cependant, certaines de ces contraintes peuvent \xeatre r\xe9solues au moment de la compilation. Nest fournit un plugin qui am\xe9liore le processus de compilation de TypeScript afin de r\xe9duire la quantit\xe9 de code de type \"boilerplate\" n\xe9cessaire."),e.k0s(),e.j41(12,"blockquote",7)(13,"strong"),e.EFF(14,"Astuce"),e.k0s(),e.EFF(15," Ce plugin est "),e.j41(16,"strong"),e.EFF(17,"sur activation"),e.k0s(),e.EFF(18,". Si vous pr\xe9f\xe9rez, vous pouvez d\xe9clarer tous les d\xe9corateurs manuellement, ou seulement les d\xe9corateurs sp\xe9cifiques dont vous avez besoin.\n"),e.k0s(),e.j41(19,"h4",8)(20,"span"),e.EFF(21,"Vue d'ensemble"),e.k0s()(),e.j41(22,"p"),e.EFF(23,"Le plugin Swagger va automatiquement :"),e.k0s(),e.j41(24,"ul")(25,"li"),e.EFF(26,"annoter toutes les propri\xe9t\xe9s DTO avec "),e.j41(27,"code"),e.EFF(28,"@ApiProperty"),e.k0s(),e.EFF(29," sauf si "),e.j41(30,"code"),e.EFF(31,"@ApiHideProperty"),e.k0s(),e.EFF(32," est utilis\xe9"),e.k0s(),e.j41(33,"li"),e.EFF(34,"d\xe9finir la propri\xe9t\xe9 "),e.j41(35,"code"),e.EFF(36,"required"),e.k0s(),e.EFF(37," en fonction du point d'interrogation (par exemple, "),e.j41(38,"code"),e.EFF(39,"name? : string"),e.k0s(),e.EFF(40," d\xe9finira "),e.j41(41,"code"),e.EFF(42,"required : false"),e.k0s(),e.EFF(43,")"),e.k0s(),e.j41(44,"li"),e.EFF(45,"fixer la propri\xe9t\xe9 "),e.j41(46,"code"),e.EFF(47,"type"),e.k0s(),e.EFF(48," ou "),e.j41(49,"code"),e.EFF(50,"enum"),e.k0s(),e.EFF(51," en fonction du type (supporte aussi les tableaux)"),e.k0s(),e.j41(52,"li"),e.EFF(53,"d\xe9finir la propri\xe9t\xe9 "),e.j41(54,"code"),e.EFF(55,"default"),e.k0s(),e.EFF(56," en fonction de la valeur par d\xe9faut assign\xe9e"),e.k0s(),e.j41(57,"li"),e.EFF(58,"d\xe9finir plusieurs r\xe8gles de validation bas\xe9es sur les d\xe9corateurs "),e.j41(59,"code"),e.EFF(60,"class-validator"),e.k0s(),e.EFF(61," (si "),e.j41(62,"code"),e.EFF(63,"classValidatorShim"),e.k0s(),e.EFF(64," est fix\xe9 \xe0 "),e.j41(65,"code"),e.EFF(66,"true"),e.k0s(),e.EFF(67,")"),e.k0s(),e.j41(68,"li"),e.EFF(69,"ajouter un d\xe9corateur de r\xe9ponse \xe0 chaque endpoint avec un statut et un "),e.j41(70,"code"),e.EFF(71,"type"),e.k0s(),e.EFF(72," appropri\xe9s (mod\xe8le de r\xe9ponse)"),e.k0s(),e.j41(73,"li"),e.EFF(74,"g\xe9n\xe9rer des descriptions pour les propri\xe9t\xe9s et les endpoints en se basant sur les commentaires (si "),e.j41(75,"code"),e.EFF(76,"introspectComments"),e.k0s(),e.EFF(77," est fix\xe9 \xe0 "),e.j41(78,"code"),e.EFF(79,"true"),e.k0s(),e.EFF(80,")"),e.k0s(),e.j41(81,"li"),e.EFF(82,"g\xe9n\xe9rer des exemples de valeurs pour les propri\xe9t\xe9s en se basant sur les commentaires (si "),e.j41(83,"code"),e.EFF(84,"introspectComments"),e.k0s(),e.EFF(85," est fix\xe9 \xe0 "),e.j41(86,"code"),e.EFF(87,"true"),e.k0s(),e.EFF(88,")"),e.k0s()(),e.j41(89,"p"),e.EFF(90,"Veuillez noter que vos noms de fichiers "),e.j41(91,"strong"),e.EFF(92,"doivent avoir"),e.k0s(),e.EFF(93," l'un des suffixes suivants : "),e.j41(94,"code"),e.EFF(95,"['.dto.ts', '.entity.ts']"),e.k0s(),e.EFF(96," (par exemple, "),e.j41(97,"code"),e.EFF(98,"create-user.dto.ts"),e.k0s(),e.EFF(99,") afin d'\xeatre analys\xe9 par le plugin."),e.k0s(),e.j41(100,"p"),e.EFF(101,"Si vous utilisez un suffixe diff\xe9rent, vous pouvez ajuster le comportement du plugin en sp\xe9cifiant l'option "),e.j41(102,"code"),e.EFF(103,"dtoFileNameSuffix"),e.k0s(),e.EFF(104," (voir ci-dessous)."),e.k0s(),e.j41(105,"p"),e.EFF(106,"Auparavant, si vous vouliez fournir une exp\xe9rience interactive avec l'interface Swagger, vous deviez dupliquer beaucoup de code pour faire savoir au package comment vos mod\xe8les/composants devaient \xeatre d\xe9clar\xe9s dans la sp\xe9cification. Par exemple, vous pouviez d\xe9finir une simple classe "),e.j41(107,"code"),e.EFF(108,"CreateUserDto"),e.k0s(),e.EFF(109," comme suit :"),e.k0s(),e.j41(110,"app-copy-button")(111,"pre")(112,"code",9),e.EFF(113,"\nexport class CreateUserDto {\n  @ApiProperty()\n  email: string;\n\n  @ApiProperty()\n  password: string;\n\n  @ApiProperty({ enum: RoleEnum, default: [], isArray: true })\n  roles: RoleEnum[] = [];\n\n  @ApiProperty({ required: false, default: true })\n  isEnabled?: boolean = true;\n}\n"),e.k0s()()(),e.j41(114,"p"),e.EFF(115,"Bien qu'il ne s'agisse pas d'un probl\xe8me important pour les projets de taille moyenne, il devient verbeux et difficile \xe0 maintenir une fois que vous avez un grand nombre de classes."),e.k0s(),e.j41(116,"p"),e.EFF(117,"En "),e.j41(118,"a",10),e.EFF(119,"activant le plugin Swagger"),e.k0s(),e.EFF(120,", la d\xe9finition de la classe ci-dessus peut \xeatre d\xe9clar\xe9e simplement :"),e.k0s(),e.j41(121,"app-copy-button")(122,"pre")(123,"code",9),e.EFF(124,"\nexport class CreateUserDto {\n  email: string;\n  password: string;\n  roles: RoleEnum[] = [];\n  isEnabled?: boolean = true;\n}\n"),e.k0s()()(),e.j41(125,"blockquote",7)(126,"strong"),e.EFF(127,"Note"),e.k0s(),e.EFF(128," Le plugin Swagger d\xe9rive les annotations @ApiProperty() des types TypeScript et des d\xe9corateurs de validation de classe. Cela permet de d\xe9crire clairement votre API dans la documentation g\xe9n\xe9r\xe9e par l'interface utilisateur Swagger. Cependant, la validation au moment de l'ex\xe9cution sera toujours g\xe9r\xe9e par les d\xe9corateurs class-validator. Il est donc n\xe9cessaire de continuer \xe0 utiliser des validateurs comme "),e.j41(129,"code"),e.EFF(130,"IsEmail()"),e.k0s(),e.EFF(131,", "),e.j41(132,"code"),e.EFF(133,"IsNumber()"),e.k0s(),e.EFF(134,", etc.\n"),e.k0s(),e.j41(135,"p"),e.EFF(136,"Par cons\xe9quent, si vous avez l'intention de vous appuyer sur des annotations automatiques pour g\xe9n\xe9rer des documentations et que vous souhaitez toujours des validations au moment de l'ex\xe9cution, les d\xe9corateurs class-validator sont toujours n\xe9cessaires."),e.k0s(),e.j41(137,"blockquote",7)(138,"strong"),e.EFF(139,"Astuce"),e.k0s(),e.EFF(140," Lorsque vous utilisez des "),e.j41(141,"a",11),e.EFF(142,"utilitaires de types mapp\xe9s"),e.k0s(),e.EFF(143," (comme "),e.j41(144,"code"),e.EFF(145,"PartialType"),e.k0s(),e.EFF(146,") dans les DTOs, importez-les depuis "),e.j41(147,"code"),e.EFF(148,"@nestjs/swagger"),e.k0s(),e.EFF(149," au lieu de "),e.j41(150,"code"),e.EFF(151,"@nestjs/mapped-types"),e.k0s(),e.EFF(152," pour que le plugin prenne en compte le sch\xe9ma.\n"),e.k0s(),e.j41(153,"p"),e.EFF(154,"Le plugin ajoute les d\xe9corateurs appropri\xe9s \xe0 la vol\xe9e en se basant sur l'"),e.j41(155,"strong"),e.EFF(156,"Arbre Syntaxique Abstrait"),e.k0s(),e.EFF(157,". Ainsi, vous n'aurez pas \xe0 vous battre avec les d\xe9corateurs "),e.j41(158,"code"),e.EFF(159,"@ApiProperty"),e.k0s(),e.EFF(160," diss\xe9min\xe9s dans le code."),e.k0s(),e.j41(161,"blockquote",7)(162,"strong"),e.EFF(163,"Astuce"),e.k0s(),e.EFF(164," Le plugin g\xe9n\xe8re automatiquement toutes les propri\xe9t\xe9s swagger manquantes, mais si vous avez besoin de les surcharger, il vous suffit de les d\xe9finir explicitement via "),e.j41(165,"code"),e.EFF(166,"@ApiProperty()"),e.k0s(),e.EFF(167,".\n"),e.k0s(),e.j41(168,"h4",12)(169,"span"),e.EFF(170,"Introspection des commentaires"),e.k0s()(),e.j41(171,"p"),e.EFF(172,"Lorsque la fonction d'introspection des commentaires est activ\xe9e, le plugin CLI g\xe9n\xe8re des descriptions et des exemples de valeurs pour les propri\xe9t\xe9s en se basant sur les commentaires."),e.k0s(),e.j41(173,"p"),e.EFF(174,"Par exemple, voici un exemple de propri\xe9t\xe9 "),e.j41(175,"code"),e.EFF(176,"roles"),e.k0s(),e.EFF(177," :"),e.k0s(),e.j41(178,"app-copy-button")(179,"pre")(180,"code",9),e.EFF(181,"\n/**\n * Une liste des r\xf4les de l'utilisateur\n * @example ['admin']\n */\n@ApiProperty({\n  description: `Une liste des r\xf4les de l'utilisateur`,\n  example: ['admin'],\n})\nroles: RoleEnum[] = [];\n"),e.k0s()()(),e.j41(182,"p"),e.EFF(183,"Vous devez dupliquer les valeurs de description et d'exemple. Avec "),e.j41(184,"code"),e.EFF(185,"introspectComments"),e.k0s(),e.EFF(186," activ\xe9, le plugin CLI peut extraire ces commentaires et fournir automatiquement des descriptions (et des exemples, si d\xe9finis) pour les propri\xe9t\xe9s. Maintenant, la propri\xe9t\xe9 ci-dessus peut \xeatre d\xe9clar\xe9e simplement comme suit :"),e.k0s(),e.j41(187,"app-copy-button")(188,"pre")(189,"code",9),e.EFF(190,"\n/**\n * Une liste des r\xf4les de l'utilisateur\n * @example ['admin']\n */\nroles: RoleEnum[] = [];\n"),e.k0s()()(),e.j41(191,"p"),e.EFF(192,"Il y a des options de plugin "),e.j41(193,"code"),e.EFF(194,"dtoKeyOfComment"),e.k0s(),e.EFF(195," et "),e.j41(196,"code"),e.EFF(197,"controllerKeyOfComment"),e.k0s(),e.EFF(198," que vous disponible pour personnaliser la fa\xe7on dont le plugin va assigner les valeurs aux d\xe9corateurs "),e.j41(199,"code"),e.EFF(200,"ApiProperty"),e.k0s(),e.EFF(201," et "),e.j41(202,"code"),e.EFF(203,"ApiOperation"),e.k0s(),e.EFF(204," respectivement. Voir l'exemple ci-dessous :"),e.k0s(),e.j41(205,"app-copy-button")(206,"pre")(207,"code",9),e.EFF(208,"\nexport class SomeController {\n  /**\n   * Cr\xe9er une ressource\n   */\n  @Post()\n  create() {}\n}\n"),e.k0s()()(),e.j41(209,"p"),e.EFF(210,"Cela \xe9quivaut \xe0 l'instruction suivante :"),e.k0s(),e.j41(211,"app-copy-button")(212,"pre")(213,"code",9),e.EFF(214,'\n@ApiOperation({ summary: "Cr\xe9er une ressource" })\n'),e.k0s()()(),e.j41(215,"blockquote",7)(216,"strong"),e.EFF(217,"Astuce"),e.k0s(),e.EFF(218," Pour les mod\xe8les, la m\xeame logique s'applique mais est utilis\xe9e avec le d\xe9corateur "),e.j41(219,"code"),e.EFF(220,"ApiProperty"),e.k0s(),e.EFF(221," \xe0 la place.\n"),e.k0s(),e.j41(222,"p"),e.EFF(223,"Pour les contr\xf4leurs, vous pouvez fournir non seulement un r\xe9sum\xe9, mais aussi une description (remarques), des balises (telles que @deprecated`) et des exemples de r\xe9ponses, comme ceci :"),e.k0s(),e.j41(224,"app-copy-button")(225,"pre")(226,"code",9),e.EFF(227,"\n/**\n * Cr\xe9er un nouveau chat\n *\n * @remarks Cette op\xe9ration permet de cr\xe9er un nouveau chat.\n *\n * @deprecated\n * @throws {500} Something went wrong.\n * @throws {400} Bad Request.\n */\n@Post()\nasync create(): Promise<Cat> {}\n"),e.k0s()()(),e.j41(228,"h4",13)(229,"span"),e.EFF(230,"Utiliser le plugin CLI"),e.k0s()(),e.j41(231,"p"),e.EFF(232,"Pour activer le plugin, ouvrez "),e.j41(233,"code"),e.EFF(234,"nest-cli.json"),e.k0s(),e.EFF(235," (si vous utilisez "),e.j41(236,"a",14),e.EFF(237,"Nest CLI"),e.k0s(),e.EFF(238,") et ajoutez la configuration "),e.j41(239,"code"),e.EFF(240,"plugins"),e.k0s(),e.EFF(241," suivante :"),e.k0s(),e.j41(242,"pre")(243,"code",15),e.EFF(244,'\n{\n  "collection": "@nestjs/schematics",\n  "sourceRoot": "src",\n  "compilerOptions": {\n    "plugins": ["@nestjs/swagger"]\n  }\n}\n'),e.k0s()(),e.j41(245,"p"),e.EFF(246,"Vous pouvez utiliser la propri\xe9t\xe9 "),e.j41(247,"code"),e.EFF(248,"options"),e.k0s(),e.EFF(249," pour personnaliser le comportement du plugin."),e.k0s(),e.j41(250,"pre")(251,"code",15),e.EFF(252,'\n"plugins": [\n  {\n    "name": "@nestjs/swagger",\n    "options": {\n      "classValidatorShim": false,\n      "introspectComments": true\n    }\n  }\n]\n'),e.k0s()(),e.j41(253,"p"),e.EFF(254,"La propri\xe9t\xe9 "),e.j41(255,"code"),e.EFF(256,"options"),e.k0s(),e.EFF(257," doit remplir l'interface suivante :"),e.k0s(),e.j41(258,"app-copy-button")(259,"pre")(260,"code",9),e.EFF(261,"\nexport interface PluginOptions {\n  dtoFileNameSuffix?: string[];\n  controllerFileNameSuffix?: string[];\n  classValidatorShim?: boolean;\n  dtoKeyOfComment?: string;\n  controllerKeyOfComment?: string;\n  introspectComments?: boolean;\n}\n"),e.k0s()()(),e.j41(262,"table")(263,"tr")(264,"th"),e.EFF(265,"Option"),e.k0s(),e.j41(266,"th"),e.EFF(267,"Par d\xe9faut"),e.k0s(),e.j41(268,"th"),e.EFF(269,"Description"),e.k0s()(),e.j41(270,"tr")(271,"td")(272,"code"),e.EFF(273,"dtoFileNameSuffix"),e.k0s()(),e.j41(274,"td")(275,"code"),e.EFF(276,"['.dto.ts', '.entity.ts']"),e.k0s()(),e.j41(277,"td"),e.EFF(278,"Suffixe des fichiers DTO (Data Transfer Object)"),e.k0s()(),e.j41(279,"tr")(280,"td")(281,"code"),e.EFF(282,"controllerFileNameSuffix"),e.k0s()(),e.j41(283,"td")(284,"code"),e.EFF(285,".controller.ts"),e.k0s()(),e.j41(286,"td"),e.EFF(287,"Suffixe des fichiers du contr\xf4leur"),e.k0s()(),e.j41(288,"tr")(289,"td")(290,"code"),e.EFF(291,"classValidatorShim"),e.k0s()(),e.j41(292,"td")(293,"code"),e.EFF(294,"true"),e.k0s()(),e.j41(295,"td"),e.EFF(296,"Si la valeur est fix\xe9e \xe0 true, le module r\xe9utilisera les d\xe9corateurs de validation "),e.j41(297,"code"),e.EFF(298,"class-validator"),e.k0s(),e.EFF(299," (par exemple, "),e.j41(300,"code"),e.EFF(301,"@Max(10)"),e.k0s(),e.EFF(302," ajoutera "),e.j41(303,"code"),e.EFF(304,"max: 10"),e.k0s(),e.EFF(305," \xe0 la d\xe9finition du sch\xe9ma) "),e.k0s()(),e.j41(306,"tr")(307,"td")(308,"code"),e.EFF(309,"dtoKeyOfComment"),e.k0s()(),e.j41(310,"td")(311,"code"),e.EFF(312,"'description'"),e.k0s()(),e.j41(313,"td"),e.EFF(314,"Cl\xe9 de propri\xe9t\xe9 \xe0 laquelle attribuer le texte du commentaire sur "),e.j41(315,"code"),e.EFF(316,"ApiProperty"),e.k0s(),e.EFF(317,"."),e.k0s()(),e.j41(318,"tr")(319,"td")(320,"code"),e.EFF(321,"controllerKeyOfComment"),e.k0s()(),e.j41(322,"td")(323,"code"),e.EFF(324,"'summary'"),e.k0s()(),e.j41(325,"td"),e.EFF(326,"Cl\xe9 de propri\xe9t\xe9 \xe0 laquelle attribuer le texte du commentaire "),e.j41(327,"code"),e.EFF(328,"ApiOperation"),e.k0s(),e.EFF(329,"."),e.k0s()(),e.j41(330,"tr")(331,"td")(332,"code"),e.EFF(333,"introspectComments"),e.k0s()(),e.j41(334,"td")(335,"code"),e.EFF(336,"false"),e.k0s()(),e.j41(337,"td"),e.EFF(338,"Si la valeur est fix\xe9e \xe0 true, le plugin g\xe9n\xe8re des descriptions et des exemples de valeurs pour les propri\xe9t\xe9s en se basant sur les commentaires."),e.k0s()()(),e.j41(339,"p"),e.EFF(340,"Assurez-vous de supprimer le dossier "),e.j41(341,"code"),e.EFF(342,"/dist"),e.k0s(),e.EFF(343," et de reconstruire votre application \xe0 chaque fois que les options du plugin sont mises \xe0 jour.\nSi vous n'utilisez pas le CLI mais que vous avez une configuration personnalis\xe9e de "),e.j41(344,"code"),e.EFF(345,"webpack"),e.k0s(),e.EFF(346,", vous pouvez utiliser ce plugin en combinaison avec "),e.j41(347,"code"),e.EFF(348,"ts-loader"),e.k0s(),e.EFF(349," :"),e.k0s(),e.j41(350,"pre")(351,"code",15),e.EFF(352,"\ngetCustomTransformers: (program: any) => ({\n  before: [require('@nestjs/swagger/plugin').before({}, program)]\n}),\n"),e.k0s()(),e.j41(353,"h4",16)(354,"span"),e.EFF(355,"Constructeur SWC"),e.k0s()(),e.j41(356,"p"),e.EFF(357,"Pour les configurations standard (non monorepo), pour utiliser les plugins CLI avec le constructeur SWC, vous devez activer le contr\xf4le de type, comme d\xe9crit "),e.j41(358,"a",17),e.EFF(359,"ici"),e.k0s(),e.EFF(360,"."),e.k0s(),e.j41(361,"pre")(362,"code",18),e.EFF(363,"\n$ nest start -b swc --type-check\n"),e.k0s()(),e.j41(364,"p"),e.EFF(365,"Pour les installations monorepo, suivez les instructions "),e.j41(366,"a",19),e.EFF(367,"ici"),e.k0s(),e.EFF(368,"."),e.k0s(),e.j41(369,"pre")(370,"code",18),e.EFF(371,"\n$ npx ts-node src/generate-metadata.ts\n# OU npx ts-node apps/{YOUR_APP}/src/generate-metadata.ts\n"),e.k0s()(),e.j41(372,"p"),e.EFF(373,"Maintenant, le fichier de m\xe9tadonn\xe9es s\xe9rialis\xe9 doit \xeatre charg\xe9 par la m\xe9thode "),e.j41(374,"code"),e.EFF(375,"SwaggerModule#loadPluginMetadata"),e.k0s(),e.EFF(376,", comme montr\xe9 ci-dessous :"),e.k0s(),e.j41(377,"app-copy-button")(378,"pre")(379,"code",9),e.EFF(380,"\nimport metadata from './metadata'; // <-- fichier g\xe9n\xe9r\xe9 automatiquement par le \"PluginMetadataGenerator\"\n\nawait SwaggerModule.loadPluginMetadata(metadata); // <-- ici\nconst document = SwaggerModule.createDocument(app, config);\n"),e.k0s()()(),e.j41(381,"h4",20)(382,"span"),e.EFF(383,"Int\xe9gration avec "),e.j41(384,"code"),e.EFF(385,"ts-jest"),e.k0s(),e.EFF(386," (tests e2e)"),e.k0s()(),e.j41(387,"p"),e.EFF(388,"Pour ex\xe9cuter les tests e2e, "),e.j41(389,"code"),e.EFF(390,"ts-jest"),e.k0s(),e.EFF(391," compile vos fichiers de code source \xe0 la vol\xe9e, en m\xe9moire. Cela signifie qu'il n'utilise pas le compilateur Nest CLI et n'applique aucun plugin ou n'effectue aucune transformation AST."),e.k0s(),e.j41(392,"p"),e.EFF(393,"Pour activer le plugin, cr\xe9ez le fichier suivant dans votre r\xe9pertoire de tests e2e :"),e.k0s(),e.j41(394,"pre")(395,"code",15),e.EFF(396,"\nconst transformer = require('@nestjs/swagger/plugin');\n\nmodule.exports.name = 'nestjs-swagger-transformer';\n// vous devez changer le num\xe9ro de version \xe0 chaque fois que vous modifiez la configuration ci-dessous - sinon, jest ne d\xe9tectera pas les changements\nmodule.exports.version = 1;\n\nmodule.exports.factory = (cs) => {\n  return transformer.before(\n    {\n      // options @nestjs/swagger/plugin (peut \xeatre vide)\n    },\n    cs.program, // \"cs.tsCompiler.program\" pour les anciennes versions de Jest (<= v27)\n  );\n};\n"),e.k0s()(),e.j41(397,"p"),e.EFF(398,"Avec ceci en place, importez le transformateur AST dans votre fichier de configuration "),e.j41(399,"code"),e.EFF(400,"jest"),e.k0s(),e.EFF(401,". Par d\xe9faut (dans l'application de d\xe9marrage), le fichier de configuration des tests e2e est situ\xe9 dans le dossier "),e.j41(402,"code"),e.EFF(403,"test"),e.k0s(),e.EFF(404," et est nomm\xe9 "),e.j41(405,"code"),e.EFF(406,"jest-e2e.json"),e.k0s(),e.EFF(407,"."),e.k0s(),e.j41(408,"p"),e.EFF(409,"Si vous utilisez "),e.j41(410,"code"),e.EFF(411,"jest@<29"),e.k0s(),e.EFF(412,", alors utilisez l'extrait ci-dessous."),e.k0s(),e.j41(413,"pre")(414,"code",21),e.EFF(415,'\n{\n  ... // autres configurations\n  "globals": {\n    "ts-jest": {\n      "astTransformers": {\n        "before": ["<chemin d\'acc\xe8s au fichier cr\xe9\xe9 ci-dessus>"]\n      }\n    }\n  }\n}\n'),e.k0s()(),e.j41(416,"p"),e.EFF(417,"Si vous utilisez "),e.j41(418,"code"),e.EFF(419,"jest@^29"),e.k0s(),e.EFF(420,", alors utilisez l'extrait ci-dessous, car l'approche pr\xe9c\xe9dente a \xe9t\xe9 d\xe9pr\xe9ci\xe9e."),e.k0s(),e.j41(421,"pre")(422,"code",21),e.EFF(423,'\n{\n  ... // autres configurations\n  "transform": {\n    "^.+\\\\.(t|j)s$": [\n      "ts-jest",\n      {\n        "astTransformers": {\n          "before": ["<chemin d\'acc\xe8s au fichier cr\xe9\xe9 ci-dessus>"]\n        }\n      }\n    ]\n  }\n}\n'),e.k0s()(),e.j41(424,"h4",22)(425,"span"),e.EFF(426,"D\xe9pannage de "),e.j41(427,"code"),e.EFF(428,"jest"),e.k0s(),e.EFF(429," (tests e2e)"),e.k0s()(),e.j41(430,"p"),e.EFF(431,"Dans le cas o\xf9 "),e.j41(432,"code"),e.EFF(433,"jest"),e.k0s(),e.EFF(434," ne semble pas prendre en compte vos changements de configuration, il est possible que Jest ait d\xe9j\xe0 "),e.j41(435,"strong"),e.EFF(436,"mis en cache"),e.k0s(),e.EFF(437," le r\xe9sultat de la construction. Pour appliquer la nouvelle configuration, vous devez vider le r\xe9pertoire de cache de Jest."),e.k0s(),e.j41(438,"p"),e.EFF(439,"Pour vider le r\xe9pertoire de cache, ex\xe9cutez la commande suivante dans le dossier de votre projet NestJS :"),e.k0s(),e.j41(440,"pre")(441,"code",18),e.EFF(442,"\n$ npx jest --clearCache\n"),e.k0s()(),e.j41(443,"p"),e.EFF(444,"Si la suppression automatique du cache \xe9choue, vous pouvez toujours supprimer manuellement le dossier cache \xe0 l'aide des commandes suivantes :"),e.k0s(),e.j41(445,"pre")(446,"code",18),e.EFF(447,'\n# Trouver le r\xe9pertoire de cache de jest (habituellement /tmp/jest_rs)\n# en ex\xe9cutant la commande suivante \xe0 la racine de votre projet NestJS\n$ npx jest --showConfig | grep cache\n# exemple de r\xe9sultat :\n#   "cache": true,\n#   "cacheDirectory": "/tmp/jest_rs"\n\n# Supprimer ou vider le r\xe9pertoire de cache de Jest\n$ rm -rf  <valeur de cacheDirectory>\n# par exemple :\n# rm -rf /tmp/jest_rs\n'),e.k0s()()())},dependencies:[a.a,i.z,p.Wk],encapsulation:2,changeDetection:0})}return t})(),l=(()=>{class t extends u.y{static \u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-decorators"]],features:[e.Vt3],decls:153,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/Lou8is/docs.nestjs.fr/edit/main/content/openapi/decorators.md","aria-label","Proposer des modifications","title","Proposer des modifications"],[1,"fas","fa-edit"],["id","d\xe9corateurs"]],template:function(s,o){1&s&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"D\xe9corateurs"),e.k0s(),e.j41(7,"p"),e.EFF(8,"Tous les d\xe9corateurs OpenAPI disponibles ont un pr\xe9fixe "),e.j41(9,"code"),e.EFF(10,"Api"),e.k0s(),e.EFF(11," pour les distinguer des d\xe9corateurs de base. Vous trouverez ci-dessous la liste compl\xe8te des d\xe9corateurs export\xe9s, ainsi que la d\xe9signation du niveau auquel le d\xe9corateur peut \xeatre appliqu\xe9."),e.k0s(),e.j41(12,"table"),e.nrm(13,"thead"),e.j41(14,"tbody")(15,"tr")(16,"td")(17,"code"),e.EFF(18,"@ApiBasicAuth()"),e.k0s()(),e.j41(19,"td"),e.EFF(20,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(21,"tr")(22,"td")(23,"code"),e.EFF(24,"@ApiBearerAuth()"),e.k0s()(),e.j41(25,"td"),e.EFF(26,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(27,"tr")(28,"td")(29,"code"),e.EFF(30,"@ApiBody()"),e.k0s()(),e.j41(31,"td"),e.EFF(32,"M\xe9thode"),e.k0s()(),e.j41(33,"tr")(34,"td")(35,"code"),e.EFF(36,"@ApiConsumes()"),e.k0s()(),e.j41(37,"td"),e.EFF(38,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(39,"tr")(40,"td")(41,"code"),e.EFF(42,"@ApiCookieAuth()"),e.k0s()(),e.j41(43,"td"),e.EFF(44,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(45,"tr")(46,"td")(47,"code"),e.EFF(48,"@ApiExcludeController()"),e.k0s()(),e.j41(49,"td"),e.EFF(50,"Contr\xf4leur"),e.k0s()(),e.j41(51,"tr")(52,"td")(53,"code"),e.EFF(54,"@ApiExcludeEndpoint()"),e.k0s()(),e.j41(55,"td"),e.EFF(56,"M\xe9thode"),e.k0s()(),e.j41(57,"tr")(58,"td")(59,"code"),e.EFF(60,"@ApiExtension()"),e.k0s()(),e.j41(61,"td"),e.EFF(62,"M\xe9thode"),e.k0s()(),e.j41(63,"tr")(64,"td")(65,"code"),e.EFF(66,"@ApiExtraModel()"),e.k0s()(),e.j41(67,"td"),e.EFF(68,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(69,"tr")(70,"td")(71,"code"),e.EFF(72,"@ApiHeader()"),e.k0s()(),e.j41(73,"td"),e.EFF(74,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(75,"tr")(76,"td")(77,"code"),e.EFF(78,"@ApiHideProperty()"),e.k0s()(),e.j41(79,"td"),e.EFF(80,"Mod\xe8le"),e.k0s()(),e.j41(81,"tr")(82,"td")(83,"code"),e.EFF(84,"@ApiOAuth2()"),e.k0s()(),e.j41(85,"td"),e.EFF(86,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(87,"tr")(88,"td")(89,"code"),e.EFF(90,"@ApiOperation()"),e.k0s()(),e.j41(91,"td"),e.EFF(92,"M\xe9thode"),e.k0s()(),e.j41(93,"tr")(94,"td")(95,"code"),e.EFF(96,"@ApiParam()"),e.k0s()(),e.j41(97,"td"),e.EFF(98,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(99,"tr")(100,"td")(101,"code"),e.EFF(102,"@ApiProduces()"),e.k0s()(),e.j41(103,"td"),e.EFF(104,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(105,"tr")(106,"td")(107,"code"),e.EFF(108,"@ApiSchema()"),e.k0s()(),e.j41(109,"td"),e.EFF(110,"Mod\xe8le"),e.k0s()(),e.j41(111,"tr")(112,"td")(113,"code"),e.EFF(114,"@ApiProperty()"),e.k0s()(),e.j41(115,"td"),e.EFF(116,"Mod\xe8le"),e.k0s()(),e.j41(117,"tr")(118,"td")(119,"code"),e.EFF(120,"@ApiPropertyOptional()"),e.k0s()(),e.j41(121,"td"),e.EFF(122,"Mod\xe8le"),e.k0s()(),e.j41(123,"tr")(124,"td")(125,"code"),e.EFF(126,"@ApiQuery()"),e.k0s()(),e.j41(127,"td"),e.EFF(128,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(129,"tr")(130,"td")(131,"code"),e.EFF(132,"@ApiResponse()"),e.k0s()(),e.j41(133,"td"),e.EFF(134,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(135,"tr")(136,"td")(137,"code"),e.EFF(138,"@ApiSecurity()"),e.k0s()(),e.j41(139,"td"),e.EFF(140,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(141,"tr")(142,"td")(143,"code"),e.EFF(144,"@ApiTags()"),e.k0s()(),e.j41(145,"td"),e.EFF(146,"M\xe9thode / Contr\xf4leur"),e.k0s()(),e.j41(147,"tr")(148,"td")(149,"code"),e.EFF(150,"@ApiCallbacks()"),e.k0s()(),e.j41(151,"td"),e.EFF(152,"M\xe9thode / Contr\xf4leur"),e.k0s()()()()())},encapsulation:2,changeDetection:0})}return t})();var m=r(5119),j=r(5663);let k=(()=>{class t extends u.y{static \u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-introduction"]],features:[e.Vt3],decls:186,vars:4,consts:[["contentReference",""],["app1c9f4ca300fbab0414bf5f26417d5072cfd492fe",""],[1,"content"],[1,"github-links"],["href","https://github.com/Lou8is/docs.nestjs.fr/edit/main/content/openapi/introduction.md","aria-label","Proposer des modifications","title","Proposer des modifications"],[1,"fas","fa-edit"],["id","introduction"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/"],["rel","nofollow","target","_blank","href","https://github.com/nestjs/swagger"],["appAnchor","","id","installation"],[1,"language-bash"],["appAnchor","","id","bootstrap"],[1,"with-heading"],[1,"filename"],[1,"language-typescript"],[1,"info"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/#openapi-document"],["href","/openapi/introduction#options-de-document"],["href","/openapi/introduction#options-de-configuration"],["src","/assets/swagger1.png"],[1,"warning"],["rel","nofollow","target","_blank","href","https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP"],["appAnchor","","id","options-de-configuration"],[1,"language-TypeScript"],["appAnchor","","id","options-de-configuration-1"],["appAnchor","","id","exemple"],["rel","nofollow","target","_blank","href","https://github.com/nestjs/nest/tree/master/sample/11-swagger"]],template:function(s,o){if(1&s&&(e.j41(0,"div",2,0)(2,"div",3)(3,"a",4),e.nrm(4,"i",5),e.k0s()(),e.j41(5,"h3",6),e.EFF(6,"Introduction"),e.k0s(),e.j41(7,"p"),e.EFF(8,"La sp\xe9cification "),e.j41(9,"a",7),e.EFF(10,"OpenAPI"),e.k0s(),e.EFF(11," est un format de d\xe9finition ind\xe9pendant du langage utilis\xe9 pour d\xe9crire les API REST. Nest fournit un "),e.j41(12,"a",8),e.EFF(13,"module"),e.k0s(),e.EFF(14," d\xe9di\xe9 qui permet de g\xe9n\xe9rer une telle sp\xe9cification en s'appuyant sur des d\xe9corateurs."),e.k0s(),e.j41(15,"h4",9)(16,"span"),e.EFF(17,"Installation"),e.k0s()(),e.j41(18,"p"),e.EFF(19,"Pour commencer \xe0 l'utiliser, nous devons d'abord installer les d\xe9pendances n\xe9cessaires."),e.k0s(),e.j41(20,"pre")(21,"code",10),e.EFF(22,"\n$ npm install --save @nestjs/swagger\n"),e.k0s()(),e.j41(23,"h4",11)(24,"span"),e.EFF(25,"Bootstrap"),e.k0s()(),e.j41(26,"p"),e.EFF(27,"Une fois le processus d'installation termin\xe9, ouvrez le fichier "),e.j41(28,"code"),e.EFF(29,"main.ts"),e.k0s(),e.EFF(30," et initialisez Swagger en utilisant la classe "),e.j41(31,"code"),e.EFF(32,"SwaggerModule"),e.k0s(),e.EFF(33," :"),e.k0s(),e.j41(34,"app-copy-button",12)(35,"span",13),e.EFF(36),e.nI1(37,"extension"),e.nrm(38,"app-tabs",null,1),e.k0s(),e.j41(40,"pre")(41,"code",14),e.EFF(42,"\nimport { NestFactory } from '@nestjs/core';\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  const config = new DocumentBuilder()\n    .setTitle('Cats example')\n    .setDescription('The cats API description')\n    .setVersion('1.0')\n    .addTag('cats')\n    .build();\n  const documentFactory = () => SwaggerModule.createDocument(app, config);\n  SwaggerModule.setup('api', app, document);\n\n  await app.listen(process.env.PORT ?? 3000);\n}\nbootstrap();\n"),e.k0s()()(),e.j41(43,"blockquote",15)(44,"strong"),e.EFF(45,"Astuce"),e.k0s(),e.EFF(46," La m\xe9thode d'usine "),e.j41(47,"code"),e.EFF(48,"SwaggerModule#createDocument()"),e.k0s(),e.EFF(49," est utilis\xe9e sp\xe9cifiquement pour g\xe9n\xe9rer le document Swagger lorsque vous le demandez. Cette approche permet d'\xe9conomiser du temps d'initialisation, et le document r\xe9sultant est un objet s\xe9rialisable conforme \xe0 la sp\xe9cification "),e.j41(50,"a",16),e.EFF(51,"OpenAPI Document"),e.k0s(),e.EFF(52,". Au lieu de servir le document via HTTP, vous pouvez \xe9galement le sauvegarder en tant que fichier JSON ou YAML et l'utiliser de diff\xe9rentes mani\xe8res.\n"),e.k0s(),e.j41(53,"p"),e.EFF(54,"Le "),e.j41(55,"code"),e.EFF(56,"DocumentBuilder"),e.k0s(),e.EFF(57," aide \xe0 structurer un document de base conforme \xe0 la sp\xe9cification OpenAPI. Il fournit plusieurs m\xe9thodes qui permettent de d\xe9finir des propri\xe9t\xe9s telles que le titre, la description, la version, etc. Afin de cr\xe9er un document complet (avec toutes les routes HTTP d\xe9finies), nous utilisons la m\xe9thode "),e.j41(58,"code"),e.EFF(59,"createDocument()"),e.k0s(),e.EFF(60," de la classe "),e.j41(61,"code"),e.EFF(62,"SwaggerModule"),e.k0s(),e.EFF(63,". Cette m\xe9thode prend deux arguments, une instance d'application et un objet d'options Swagger. Alternativement, nous pouvons fournir un troisi\xe8me argument, qui doit \xeatre de type "),e.j41(64,"code"),e.EFF(65,"SwaggerDocumentOptions"),e.k0s(),e.EFF(66,". Plus d'informations \xe0 ce sujet dans la section "),e.j41(67,"a",17),e.EFF(68,"Document options"),e.k0s(),e.EFF(69,"."),e.k0s(),e.j41(70,"p"),e.EFF(71,"Une fois que nous avons cr\xe9\xe9 un document, nous pouvons appeler la m\xe9thode "),e.j41(72,"code"),e.EFF(73,"setup()"),e.k0s(),e.EFF(74,". Elle accepte :"),e.k0s(),e.j41(75,"ol")(76,"li"),e.EFF(77,"Le chemin pour monter l'interface utilisateur Swagger"),e.k0s(),e.j41(78,"li"),e.EFF(79,"Une instance d'application"),e.k0s(),e.j41(80,"li"),e.EFF(81,"L'objet document instanci\xe9 ci-dessus"),e.k0s(),e.j41(82,"li"),e.EFF(83,"Un param\xe8tre de configuration optionnel (en savoir plus "),e.j41(84,"a",18),e.EFF(85,"ici"),e.k0s(),e.EFF(86,")"),e.k0s()(),e.j41(87,"p"),e.EFF(88,"Vous pouvez maintenant ex\xe9cuter la commande suivante pour d\xe9marrer le serveur HTTP :"),e.k0s(),e.j41(89,"pre")(90,"code",10),e.EFF(91,"\n$ npm run start\n"),e.k0s()(),e.j41(92,"p"),e.EFF(93,"Pendant que l'application fonctionne, ouvrez votre navigateur et naviguez vers "),e.j41(94,"code"),e.EFF(95,"http://localhost:3000/api"),e.k0s(),e.EFF(96,". Vous devriez voir l'interface utilisateur de Swagger."),e.k0s(),e.j41(97,"figure"),e.nrm(98,"img",19),e.k0s(),e.j41(99,"p"),e.EFF(100,"Comme vous pouvez le voir, le "),e.j41(101,"code"),e.EFF(102,"SwaggerModule"),e.k0s(),e.EFF(103," refl\xe8te automatiquement tous vos endpoints."),e.k0s(),e.j41(104,"blockquote",15)(105,"strong"),e.EFF(106,"Astuce"),e.k0s(),e.EFF(107," Pour g\xe9n\xe9rer et t\xe9l\xe9charger un fichier Swagger JSON, naviguez vers "),e.j41(108,"code"),e.EFF(109,"http://localhost:3000/api-json"),e.k0s(),e.EFF(110," (en supposant que votre documentation Swagger soit disponible sous "),e.j41(111,"code"),e.EFF(112,"http://localhost:3000/api"),e.k0s(),e.EFF(113,").\nIl est \xe9galement possible de l'exposer sur une route de votre choix en utilisant uniquement la m\xe9thode setup de "),e.j41(114,"code"),e.EFF(115,"@nestjs/swagger"),e.k0s(),e.EFF(116,", comme ceci :\n"),e.j41(117,"app-copy-button")(118,"pre")(119,"code",14),e.EFF(120,"\nSwaggerModule.setup('swagger', app, document, {\n  jsonDocumentUrl: 'swagger/json',\n});\n"),e.k0s()()(),e.j41(121,"p"),e.EFF(122,"Ce qui l'exposerait \xe0 l'adresse "),e.j41(123,"code"),e.EFF(124,"http://localhost:3000/swagger/json"),e.k0s()()(),e.j41(125,"blockquote",20)(126,"strong"),e.EFF(127,"Attention"),e.k0s(),e.EFF(128," Lors de l'utilisation de "),e.j41(129,"code"),e.EFF(130,"fastify"),e.k0s(),e.EFF(131," et "),e.j41(132,"code"),e.EFF(133,"helmet"),e.k0s(),e.EFF(134,", il peut y avoir un probl\xe8me avec la "),e.j41(135,"a",21),e.EFF(136,"CSP"),e.k0s(),e.EFF(137,", pour r\xe9soudre cette collision, configurez la CSP comme indiqu\xe9 ci-dessous :\n"),e.j41(138,"app-copy-button")(139,"pre")(140,"code",14),e.EFF(141,"\napp.register(helmet, {\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [`'self'`],\n      styleSrc: [`'self'`, `'unsafe-inline'`],\n      imgSrc: [`'self'`, 'data:', 'validator.swagger.io'],\n      scriptSrc: [`'self'`, `https: 'unsafe-inline'`],\n    },\n  },\n});\n\n// Si vous n'avez pas l'intention d'utiliser CSP, vous pouvez utiliser ceci :\napp.register(helmet, {\n  contentSecurityPolicy: false,\n});\n"),e.k0s()()()(),e.j41(142,"h4",22)(143,"span"),e.EFF(144,"Options de configuration"),e.k0s()(),e.j41(145,"p"),e.EFF(146,"Lors de la cr\xe9ation d'un document, il est possible de fournir quelques options suppl\xe9mentaires pour affiner le comportement de la biblioth\xe8que. Ces options doivent \xeatre de type "),e.j41(147,"code"),e.EFF(148,"SwaggerDocumentOptions"),e.k0s(),e.EFF(149,", qui peuvent \xeatre les suivantes :"),e.k0s(),e.j41(150,"pre")(151,"code",23),e.EFF(152,"\nexport interface SwaggerDocumentOptions {\n  /**\n   * Liste des modules \xe0 inclure dans la sp\xe9cification\n   */\n  include?: Function[];\n\n  /**\n   * Mod\xe8les suppl\xe9mentaires qui devraient \xeatre inspect\xe9s et inclus dans la sp\xe9cification\n   */\n  extraModels?: Function[];\n\n  /**\n   * Si `true`, swagger ignorera le pr\xe9fixe global d\xe9fini par la m\xe9thode `setGlobalPrefix()`.\n   */\n  ignoreGlobalPrefix?: boolean;\n\n  /**\n   * Si `true`, swagger chargera \xe9galement les routes des modules import\xe9s par les modules `include`.\n   */\n  deepScanRoutes?: boolean;\n\n  /**\n   * OperationIdFactory personnalis\xe9 qui sera utilis\xe9 pour g\xe9n\xe9rer le `operationId`\n   * bas\xe9 sur `controllerKey`, `methodKey` et la version.\n   * @default () => controllerKey_methodKey_version\n   */\n  operationIdFactory?: OperationIdFactory;\n\n  /**\n   * linkNameFactory personnalis\xe9e qui sera utilis\xe9e pour g\xe9n\xe9rer le nom des liens\n   * dans le champ `links` des r\xe9ponses\n   *\n   * @see [Link objects](https://swagger.io/docs/specification/links/)\n   *\n   * @default () => `${controllerKey}_${methodKey}_from_${fieldKey}`\n   */\n  linkNameFactory?: (\n    controllerKey: string,\n    methodKey: string,\n    fieldKey: string\n  ) => string;\n\n\n  /*\n   * G\xe9n\xe8re automatiquement des balises bas\xe9es sur le nom du contr\xf4leur.\n   * Si `false`, vous devez utiliser le d\xe9corateur `@ApiTags()` pour d\xe9finir les balises.\n   * Sinon, le nom du contr\xf4leur sans le suffixe `Controller` sera utilis\xe9.\n   * @default true\n   */\n  autoTagControllers?: boolean;\n}\n"),e.k0s()(),e.j41(153,"p"),e.EFF(154,"Par exemple, si vous voulez vous assurer que la biblioth\xe8que g\xe9n\xe8re des noms d'op\xe9rations comme "),e.j41(155,"code"),e.EFF(156,"createUser"),e.k0s(),e.EFF(157," au lieu de "),e.j41(158,"code"),e.EFF(159,"UserController_createUser"),e.k0s(),e.EFF(160,", vous pouvez d\xe9finir ce qui suit :"),e.k0s(),e.j41(161,"pre")(162,"code",23),e.EFF(163,"\nconst options: SwaggerDocumentOptions =  {\n  operationIdFactory: (\n    controllerKey: string,\n    methodKey: string\n  ) => methodKey\n};\nconst documentFactory = () => SwaggerModule.createDocument(app, config, options);\n"),e.k0s()(),e.j41(164,"h4",24)(165,"span"),e.EFF(166,"Options de configuration"),e.k0s()(),e.j41(167,"p"),e.EFF(168,"Vous pouvez configurer l'interface utilisateur de Swagger en passant l'objet options qui remplit l'interface "),e.j41(169,"code"),e.EFF(170,"SwaggerCustomOptions"),e.k0s(),e.EFF(171," comme quatri\xe8me argument de la m\xe9thode "),e.j41(172,"code"),e.EFF(173,"SwaggerModule#setup"),e.k0s(),e.EFF(174,"."),e.k0s(),e.j41(175,"pre")(176,"code",23),e.EFF(177,"\nexport interface SwaggerCustomOptions {\n  /**\n   * Si `true`, les chemins des ressources Swagger seront pr\xe9fix\xe9s par le pr\xe9fixe global d\xe9fini par `setGlobalPrefix()`.\n   * Par d\xe9faut : `false`.\n   * @see https://docs.nestjs.com/faq/global-prefix\n   */\n  useGlobalPrefix?: boolean;\n\n  /**\n   * Si `false`, seules les d\xe9finitions d'API (JSON et YAML) seront servies (sur `/{path}-json` et `/{path}-yaml`).\n   * Ceci est particuli\xe8rement utile si vous h\xe9bergez d\xe9j\xe0 une interface Swagger ailleurs et que vous souhaitez simplement servir des d\xe9finitions d'API.\n   * Par d\xe9faut : `true`.\n   */\n  swaggerUiEnabled?: boolean;\n\n  /**\n   * Url de la d\xe9finition de l'API \xe0 charger dans Swagger UI.\n   */\n  swaggerUrl?: string;\n\n  /**\n   * Chemin d'acc\xe8s \xe0 la d\xe9finition JSON de l'API \xe0 servir.\n   * Par d\xe9faut : `<path>-json`.\n   */\n  jsonDocumentUrl?: string;\n\n  /**\n   * Chemin d'acc\xe8s \xe0 la d\xe9finition YAML de l'API \xe0 servir.\n   * Par d\xe9faut : `<path>-yaml`.\n   */\n  yamlDocumentUrl?: string;\n\n  /**\n   * Hook permettant de modifier le document OpenAPI avant qu'il ne soit servi.\n   * Il est appel\xe9 apr\xe8s la g\xe9n\xe9ration du document et avant qu'il ne soit servi en tant que JSON & YAML.\n   */\n  patchDocumentOnRequest?: <TRequest = any, TResponse = any>(\n    req: TRequest,\n    res: TResponse,\n    document: OpenAPIObject\n  ) => OpenAPIObject;\n\n  /**\n   * Si `true`, le s\xe9lecteur de d\xe9finitions OpenAPI est affich\xe9 dans l'interface Swagger UI.\n   * Par d\xe9faut : `false`.\n   */\n  explorer?: boolean;\n\n  /**\n   * Options suppl\xe9mentaires de l'interface utilisateur de Swagger\n   */\n  swaggerOptions?: SwaggerUiOptions;\n\n  /**\n   * Styles CSS personnalis\xe9s \xe0 injecter dans la page Swagger UI.\n   */\n  customCss?: string;\n\n  /**\n   * URL(s) d'une feuille de style CSS personnalis\xe9e \xe0 charger dans la page Swagger UI.\n   */\n  customCssUrl?: string | string[];\n\n  /**\n   * URL(s) des fichiers JavaScript personnalis\xe9s \xe0 charger dans la page Swagger UI.\n   */\n  customJs?: string | string[];\n\n  /**\n   * Scripts JavaScript personnalis\xe9s \xe0 charger dans la page Swagger UI.\n   */\n  customJsStr?: string | string[];\n\n  /**\n   * Favicon personnalis\xe9 pour la page Swagger UI.\n   */\n  customfavIcon?: string;\n\n  /**\n   * Titre personnalis\xe9 pour la page Swagger UI.\n   */\n  customSiteTitle?: string;\n\n  /**\n   * Chemin du syst\xe8me de fichiers (ex : ./node_modules/swagger-ui-dist) contenant les \xe9l\xe9ments statiques de l'interface utilisateur de Swagger.\n   */\n  customSwaggerUiPath?: string;\n\n  /**\n   * @deprecated Cette propri\xe9t\xe9 n'a aucun effet.\n   */\n  validatorUrl?: string;\n\n  /**\n   * @deprecated Cette propri\xe9t\xe9 n'a aucun effet.\n   */\n  url?: string;\n\n  /**\n   * @deprecated Cette propri\xe9t\xe9 n'a aucun effet.\n   */\n  urls?: Record<'url' | 'name', string>[];\n\n}\n"),e.k0s()(),e.j41(178,"h4",25)(179,"span"),e.EFF(180,"Exemple"),e.k0s()(),e.j41(181,"p"),e.EFF(182,"Un exemple concret est disponible "),e.j41(183,"a",26),e.EFF(184,"ici"),e.k0s(),e.EFF(185,"."),e.k0s()()),2&s){const x=e.sdS(39);e.R7$(36),e.SpI(" ",e.i5U(37,1,"main",x.isJsActive),"\n")}},dependencies:[m.O,a.a,i.z,j.M],encapsulation:2,changeDetection:0})}return t})(),g=(()=>{class t extends u.y{static \u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-mapped-types"]],features:[e.Vt3],decls:178,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/Lou8is/docs.nestjs.fr/edit/main/content/openapi/mapped-types.md","aria-label","Proposer des modifications","title","Proposer des modifications"],[1,"fas","fa-edit"],["id","types-mapp\xe9s"],["appAnchor","","id","partial"],[1,"language-typescript"],[1,"info"],["appAnchor","","id","pick"],["appAnchor","","id","omit"],["appAnchor","","id","intersection"],["appAnchor","","id","composition"]],template:function(s,o){1&s&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Types mapp\xe9s"),e.k0s(),e.j41(7,"p"),e.EFF(8,"Lorsque vous d\xe9veloppez des fonctionnalit\xe9s telles que "),e.j41(9,"strong"),e.EFF(10,"CRUD"),e.k0s(),e.EFF(11," (Create/Read/Update/Delete, litt\xe9ralement Cr\xe9er/Lire/Mettre \xe0 jour/Supprimer), il est souvent utile de construire des variantes d'un type d'entit\xe9 de base. Nest fournit plusieurs fonctions utilitaires qui effectuent des transformations de type pour rendre cette t\xe2che plus pratique."),e.k0s(),e.j41(12,"h4",6)(13,"span"),e.EFF(14,"Partial"),e.k0s()(),e.j41(15,"p"),e.EFF(16,"Lors de la cr\xe9ation de types de validation d'entr\xe9e (\xe9galement appel\xe9s DTO), il est souvent utile de cr\xe9er des variantes "),e.j41(17,"strong"),e.EFF(18,"create"),e.k0s(),e.EFF(19," et "),e.j41(20,"strong"),e.EFF(21,"update"),e.k0s(),e.EFF(22," du m\xeame type. Par exemple, la variante "),e.j41(23,"strong"),e.EFF(24,"create"),e.k0s(),e.EFF(25," peut exiger tous les champs, tandis que la variante "),e.j41(26,"strong"),e.EFF(27,"update"),e.k0s(),e.EFF(28," peut rendre tous les champs optionnels."),e.k0s(),e.j41(29,"p"),e.EFF(30,"Nest fournit la fonction utilitaire "),e.j41(31,"code"),e.EFF(32,"PartialType()"),e.k0s(),e.EFF(33," pour rendre cette t\xe2che plus facile et minimiser le travail fastidieux."),e.k0s(),e.j41(34,"p"),e.EFF(35,"La fonction "),e.j41(36,"code"),e.EFF(37,"PartialType()"),e.k0s(),e.EFF(38," renvoie un type (classe) avec toutes les propri\xe9t\xe9s du type d'entr\xe9e d\xe9finies comme optionnelles. Par exemple, supposons que nous ayons un type "),e.j41(39,"strong"),e.EFF(40,"create"),e.k0s(),e.EFF(41," comme suit :"),e.k0s(),e.j41(42,"app-copy-button")(43,"pre")(44,"code",7),e.EFF(45,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(46,"p"),e.EFF(47,"Par d\xe9faut, tous ces champs sont obligatoires. Pour cr\xe9er un type avec les m\xeames champs, mais avec chacun d'entre eux optionnel, utilisez "),e.j41(48,"code"),e.EFF(49,"PartialType()"),e.k0s(),e.EFF(50," en passant la r\xe9f\xe9rence de la classe ("),e.j41(51,"code"),e.EFF(52,"CreateCatDto"),e.k0s(),e.EFF(53,") comme argument :"),e.k0s(),e.j41(54,"app-copy-button")(55,"pre")(56,"code",7),e.EFF(57,"\nexport class UpdateCatDto extends PartialType(CreateCatDto) {}\n"),e.k0s()()(),e.j41(58,"blockquote",8)(59,"strong"),e.EFF(60,"Astuce"),e.k0s(),e.EFF(61," La fonction "),e.j41(62,"code"),e.EFF(63,"PartialType()"),e.k0s(),e.EFF(64," est import\xe9e du paquet "),e.j41(65,"code"),e.EFF(66,"@nestjs/swagger"),e.k0s(),e.EFF(67,".\n"),e.k0s(),e.j41(68,"h4",9)(69,"span"),e.EFF(70,"Pick"),e.k0s()(),e.j41(71,"p"),e.EFF(72,"La fonction "),e.j41(73,"code"),e.EFF(74,"PickType()"),e.k0s(),e.EFF(75," construit un nouveau type (classe) en choisissant un ensemble de propri\xe9t\xe9s \xe0 partir d'un type d'entr\xe9e. Par exemple, supposons que nous commencions avec un type comme :"),e.k0s(),e.j41(76,"app-copy-button")(77,"pre")(78,"code",7),e.EFF(79,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(80,"p"),e.EFF(81,"Nous pouvons choisir un ensemble de propri\xe9t\xe9s dans cette classe en utilisant la fonction utilitaire "),e.j41(82,"code"),e.EFF(83,"PickType()"),e.k0s(),e.EFF(84," :"),e.k0s(),e.j41(85,"app-copy-button")(86,"pre")(87,"code",7),e.EFF(88,"\nexport class UpdateCatAgeDto extends PickType(CreateCatDto, ['age'] as const) {}\n"),e.k0s()()(),e.j41(89,"blockquote",8)(90,"strong"),e.EFF(91,"Astuce"),e.k0s(),e.EFF(92," La fonction "),e.j41(93,"code"),e.EFF(94,"PickType()"),e.k0s(),e.EFF(95," est import\xe9e du paquet "),e.j41(96,"code"),e.EFF(97,"@nestjs/swagger"),e.k0s(),e.EFF(98,".\n"),e.k0s(),e.j41(99,"h4",10)(100,"span"),e.EFF(101,"Omit"),e.k0s()(),e.j41(102,"p"),e.EFF(103,"La fonction "),e.j41(104,"code"),e.EFF(105,"OmitType()"),e.k0s(),e.EFF(106," construit un type en prenant toutes les propri\xe9t\xe9s d'un type d'entr\xe9e et en supprimant un ensemble particulier de cl\xe9s. Par exemple, supposons que nous commencions avec un type comme :"),e.k0s(),e.j41(107,"app-copy-button")(108,"pre")(109,"code",7),e.EFF(110,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(111,"p"),e.EFF(112,"Nous pouvons g\xe9n\xe9rer un type d\xe9riv\xe9 qui poss\xe8de toutes les propri\xe9t\xe9s "),e.j41(113,"strong"),e.EFF(114,"except\xe9"),e.k0s(),e.j41(115,"code"),e.EFF(116,"name"),e.k0s(),e.EFF(117," comme montr\xe9 ci-dessous. Dans cette construction, le second argument de "),e.j41(118,"code"),e.EFF(119,"OmitType"),e.k0s(),e.EFF(120," est un tableau de noms de propri\xe9t\xe9s."),e.k0s(),e.j41(121,"app-copy-button")(122,"pre")(123,"code",7),e.EFF(124,"\nexport class UpdateCatDto extends OmitType(CreateCatDto, ['name'] as const) {}\n"),e.k0s()()(),e.j41(125,"blockquote",8)(126,"strong"),e.EFF(127,"Astuce"),e.k0s(),e.EFF(128," La fonction "),e.j41(129,"code"),e.EFF(130,"OmitType()"),e.k0s(),e.EFF(131," est import\xe9e du paquet "),e.j41(132,"code"),e.EFF(133,"@nestjs/swagger"),e.k0s(),e.EFF(134,".\n"),e.k0s(),e.j41(135,"h4",11)(136,"span"),e.EFF(137,"Intersection"),e.k0s()(),e.j41(138,"p"),e.EFF(139,"La fonction "),e.j41(140,"code"),e.EFF(141,"IntersectionType()"),e.k0s(),e.EFF(142," combine deux types en un nouveau type (classe). Par exemple, supposons que nous commencions avec deux types comme :"),e.k0s(),e.j41(143,"app-copy-button")(144,"pre")(145,"code",7),e.EFF(146,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  breed: string;\n}\n\nexport class AdditionalCatInfo {\n  @ApiProperty()\n  color: string;\n}\n"),e.k0s()()(),e.j41(147,"p"),e.EFF(148,"Nous pouvons g\xe9n\xe9rer un nouveau type qui combine toutes les propri\xe9t\xe9s des deux types."),e.k0s(),e.j41(149,"app-copy-button")(150,"pre")(151,"code",7),e.EFF(152,"\nexport class UpdateCatDto extends IntersectionType(\n  CreateCatDto,\n  AdditionalCatInfo,\n) {}\n"),e.k0s()()(),e.j41(153,"blockquote",8)(154,"strong"),e.EFF(155,"Astuce"),e.k0s(),e.EFF(156," La fonction "),e.j41(157,"code"),e.EFF(158,"IntersectionType()"),e.k0s(),e.EFF(159," est import\xe9e du paquet "),e.j41(160,"code"),e.EFF(161,"@nestjs/swagger"),e.k0s(),e.EFF(162,".\n"),e.k0s(),e.j41(163,"h4",12)(164,"span"),e.EFF(165,"Composition"),e.k0s()(),e.j41(166,"p"),e.EFF(167,"Les fonctions utilitaires de mise en correspondance des types sont composables. Par exemple, la fonction suivante produira un type (classe) qui poss\xe8de toutes les propri\xe9t\xe9s du type "),e.j41(168,"code"),e.EFF(169,"CreateCatDto"),e.k0s(),e.EFF(170," \xe0 l'exception de "),e.j41(171,"code"),e.EFF(172,"name"),e.k0s(),e.EFF(173,", et ces propri\xe9t\xe9s seront d\xe9finies comme optionnelles :"),e.k0s(),e.j41(174,"app-copy-button")(175,"pre")(176,"code",7),e.EFF(177,"\nexport class UpdateCatDto extends PartialType(\n  OmitType(CreateCatDto, ['name'] as const),\n) {}\n"),e.k0s()()()())},dependencies:[a.a,i.z],encapsulation:2,changeDetection:0})}return t})();var f=r(7077);let h=(()=>{class t extends u.y{static \u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-openapi-migration"]],features:[e.Vt3],decls:129,vars:4,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/Lou8is/docs.nestjs.fr/edit/main/content/openapi/migration-guide.md","aria-label","Proposer des modifications","title","Proposer des modifications"],[1,"fas","fa-edit"],["id","guide-de-migration"],["appAnchor","","id","changements-de-rupture"],["appAnchor","","id","nouvelles-m\xe9thodes"]],template:function(s,o){1&s&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Guide de migration"),e.k0s(),e.j41(7,"p"),e.EFF(8,"Si vous utilisez actuellement "),e.j41(9,"code"),e.EFF(10,"@nestjs/swagger@3.*"),e.k0s(),e.EFF(11,", notez les changements suivants dans la version 4.0."),e.k0s(),e.j41(12,"h4",6)(13,"span"),e.EFF(14,"Changements de rupture"),e.k0s()(),e.j41(15,"p"),e.EFF(16,"Les d\xe9corateurs suivants ont \xe9t\xe9 modifi\xe9s/renomm\xe9s :"),e.k0s(),e.j41(17,"ul")(18,"li")(19,"code"),e.EFF(20,"@ApiModelProperty"),e.k0s(),e.EFF(21," est maintenant "),e.j41(22,"code"),e.EFF(23,"@ApiProperty"),e.k0s()(),e.j41(24,"li")(25,"code"),e.EFF(26,"@ApiModelPropertyOptional"),e.k0s(),e.EFF(27," est maintenant "),e.j41(28,"code"),e.EFF(29,"@ApiPropertyOptional"),e.k0s()(),e.j41(30,"li")(31,"code"),e.EFF(32,"@ApiResponseModelProperty"),e.k0s(),e.EFF(33," est maintenant "),e.j41(34,"code"),e.EFF(35,"@ApiResponseProperty"),e.k0s()(),e.j41(36,"li")(37,"code"),e.EFF(38,"@ApiImplicitQuery"),e.k0s(),e.EFF(39," est maintenant "),e.j41(40,"code"),e.EFF(41,"@ApiQuery"),e.k0s()(),e.j41(42,"li")(43,"code"),e.EFF(44,"@ApiImplicitParam"),e.k0s(),e.EFF(45," est maintenant "),e.j41(46,"code"),e.EFF(47,"@ApiParam"),e.k0s()(),e.j41(48,"li")(49,"code"),e.EFF(50,"@ApiImplicitBody"),e.k0s(),e.EFF(51," est maintenant "),e.j41(52,"code"),e.EFF(53,"@ApiBody"),e.k0s()(),e.j41(54,"li")(55,"code"),e.EFF(56,"@ApiImplicitHeader"),e.k0s(),e.EFF(57," est maintenant "),e.j41(58,"code"),e.EFF(59,"@ApiHeader"),e.k0s()(),e.j41(60,"li")(61,"code"),e.EFF(62),e.k0s(),e.EFF(63," est maintenant "),e.j41(64,"code"),e.EFF(65),e.k0s()(),e.j41(66,"li")(67,"code"),e.EFF(68,"@ApiUseTags"),e.k0s(),e.EFF(69," est maintenant "),e.j41(70,"code"),e.EFF(71,"@ApiTags"),e.k0s()()(),e.j41(72,"p")(73,"code"),e.EFF(74,"DocumentBuilder"),e.k0s(),e.EFF(75," changements radicaux (mise \xe0 jour des signatures de m\xe9thodes) :"),e.k0s(),e.j41(76,"ul")(77,"li")(78,"code"),e.EFF(79,"addTag"),e.k0s()(),e.j41(80,"li")(81,"code"),e.EFF(82,"addBearerAuth"),e.k0s()(),e.j41(83,"li")(84,"code"),e.EFF(85,"addOAuth2"),e.k0s()(),e.j41(86,"li")(87,"code"),e.EFF(88,"setContactEmail"),e.k0s(),e.EFF(89," est maintenant "),e.j41(90,"code"),e.EFF(91,"setContact"),e.k0s()(),e.j41(92,"li")(93,"code"),e.EFF(94,"setHost"),e.k0s(),e.EFF(95," a \xe9t\xe9 supprim\xe9"),e.k0s(),e.j41(96,"li")(97,"code"),e.EFF(98,"setSchemes"),e.k0s(),e.EFF(99," a \xe9t\xe9 supprim\xe9 (utiliser "),e.j41(100,"code"),e.EFF(101,"addServer"),e.k0s(),e.EFF(102," \xe0 la place, par exemple, "),e.j41(103,"code"),e.EFF(104,"addServer('http://')"),e.k0s(),e.EFF(105,")"),e.k0s()(),e.j41(106,"h4",7)(107,"span"),e.EFF(108,"Nouvelles m\xe9thodes"),e.k0s()(),e.j41(109,"p"),e.EFF(110,"Les m\xe9thodes suivantes ont \xe9t\xe9 ajout\xe9es :"),e.k0s(),e.j41(111,"ul")(112,"li")(113,"code"),e.EFF(114,"addServer"),e.k0s()(),e.j41(115,"li")(116,"code"),e.EFF(117,"addApiKey"),e.k0s()(),e.j41(118,"li")(119,"code"),e.EFF(120,"addBasicAuth"),e.k0s()(),e.j41(121,"li")(122,"code"),e.EFF(123,"addSecurity"),e.k0s()(),e.j41(124,"li")(125,"code"),e.EFF(126,"addSecurityRequirements"),e.k0s()()(),e.j41(127,"p"),e.nrm(128,"app-banner-devtools"),e.k0s()()),2&s&&(e.R7$(62),e.Lme("@ApiOperation(","{"," title: 'test' ","}",")"),e.R7$(3),e.Lme("@ApiOperation(","{"," summary: 'test' ","}",")"))},dependencies:[a.a,f._],encapsulation:2,changeDetection:0})}return t})(),v=(()=>{class t extends u.y{static \u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-openapi-operations"]],features:[e.Vt3],decls:384,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/Lou8is/docs.nestjs.fr/edit/main/content/openapi/operations.md","aria-label","Proposer des modifications","title","Proposer des modifications"],[1,"fas","fa-edit"],["id","op\xe9rations"],["appAnchor","","id","tags"],[1,"language-typescript"],["appAnchor","","id","en-t\xeates"],["appAnchor","","id","r\xe9ponses"],["src","/assets/swagger-response-type.png"],["appAnchor","","id","t\xe9l\xe9chargement-de-fichiers"],["routerLink","/techniques/file-upload"],["appAnchor","","id","extensions"],["appAnchor","","id","avanc\xe9--g\xe9n\xe9rique-apiresponse"],[1,"language-ts"],["href","/openapi/types-and-parameters#mod%C3%A8les-additionnels"],[1,"language-json"],[1,"info"]],template:function(s,o){1&s&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Op\xe9rations"),e.k0s(),e.j41(7,"p"),e.EFF(8,"En termes d'OpenAPI, les chemins sont des endpoints (ressources), tels que "),e.j41(9,"code"),e.EFF(10,"/users"),e.k0s(),e.EFF(11," ou "),e.j41(12,"code"),e.EFF(13,"/reports/summary"),e.k0s(),e.EFF(14,", que votre API expose, et les op\xe9rations sont les m\xe9thodes HTTP utilis\xe9es pour manipuler ces chemins, telles que "),e.j41(15,"code"),e.EFF(16,"GET"),e.k0s(),e.EFF(17,", "),e.j41(18,"code"),e.EFF(19,"POST"),e.k0s(),e.EFF(20," ou "),e.j41(21,"code"),e.EFF(22,"DELETE"),e.k0s(),e.EFF(23,"."),e.k0s(),e.j41(24,"h4",6)(25,"span"),e.EFF(26,"Tags"),e.k0s()(),e.j41(27,"p"),e.EFF(28,"Pour attacher un contr\xf4leur \xe0 un tag sp\xe9cifique, utilisez le d\xe9corateur "),e.j41(29,"code"),e.EFF(30,"@ApiTags(...tags)"),e.k0s(),e.EFF(31,"."),e.k0s(),e.j41(32,"app-copy-button")(33,"pre")(34,"code",7),e.EFF(35,"\n@ApiTags('cats')\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(36,"h4",8)(37,"span"),e.EFF(38,"En-t\xeates"),e.k0s()(),e.j41(39,"p"),e.EFF(40,"Pour d\xe9finir des en-t\xeates personnalis\xe9s qui sont attendus dans le cadre de la requ\xeate, utilisez "),e.j41(41,"code"),e.EFF(42,"@ApiHeader()"),e.k0s(),e.EFF(43,"."),e.k0s(),e.j41(44,"app-copy-button")(45,"pre")(46,"code",7),e.EFF(47,"\n@ApiHeader({\n  name: 'X-MyHeader',\n  description: 'En-t\xeate personnalis\xe9',\n})\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(48,"h4",9)(49,"span"),e.EFF(50,"R\xe9ponses"),e.k0s()(),e.j41(51,"p"),e.EFF(52,"Pour d\xe9finir une r\xe9ponse HTTP personnalis\xe9e, utilisez le d\xe9corateur "),e.j41(53,"code"),e.EFF(54,"@ApiResponse()"),e.k0s(),e.EFF(55,"."),e.k0s(),e.j41(56,"app-copy-button")(57,"pre")(58,"code",7),e.EFF(59,"\n@Post()\n@ApiResponse({ status: 201, description: 'L enregistrement a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s.'})\n@ApiResponse({ status: 403, description: 'Interdit.'})\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.k0s()()(),e.j41(60,"p"),e.EFF(61,"Nest fournit un ensemble de d\xe9corateurs "),e.j41(62,"strong"),e.EFF(63,"API response"),e.k0s(),e.EFF(64," qui h\xe9ritent du d\xe9corateur "),e.j41(65,"code"),e.EFF(66,"@ApiResponse"),e.k0s(),e.EFF(67," :"),e.k0s(),e.j41(68,"ul")(69,"li")(70,"code"),e.EFF(71,"@ApiOkResponse()"),e.k0s()(),e.j41(72,"li")(73,"code"),e.EFF(74,"@ApiCreatedResponse()"),e.k0s()(),e.j41(75,"li")(76,"code"),e.EFF(77,"@ApiAcceptedResponse()"),e.k0s()(),e.j41(78,"li")(79,"code"),e.EFF(80,"@ApiNoContentResponse()"),e.k0s()(),e.j41(81,"li")(82,"code"),e.EFF(83,"@ApiMovedPermanentlyResponse()"),e.k0s()(),e.j41(84,"li")(85,"code"),e.EFF(86,"@ApiFoundResponse()"),e.k0s()(),e.j41(87,"li")(88,"code"),e.EFF(89,"@ApiBadRequestResponse()"),e.k0s()(),e.j41(90,"li")(91,"code"),e.EFF(92,"@ApiUnauthorizedResponse()"),e.k0s()(),e.j41(93,"li")(94,"code"),e.EFF(95,"@ApiNotFoundResponse()"),e.k0s()(),e.j41(96,"li")(97,"code"),e.EFF(98,"@ApiForbiddenResponse()"),e.k0s()(),e.j41(99,"li")(100,"code"),e.EFF(101,"@ApiMethodNotAllowedResponse()"),e.k0s()(),e.j41(102,"li")(103,"code"),e.EFF(104,"@ApiNotAcceptableResponse()"),e.k0s()(),e.j41(105,"li")(106,"code"),e.EFF(107,"@ApiRequestTimeoutResponse()"),e.k0s()(),e.j41(108,"li")(109,"code"),e.EFF(110,"@ApiConflictResponse()"),e.k0s()(),e.j41(111,"li")(112,"code"),e.EFF(113,"@ApiPreconditionFailedResponse()"),e.k0s()(),e.j41(114,"li")(115,"code"),e.EFF(116,"@ApiTooManyRequestsResponse()"),e.k0s()(),e.j41(117,"li")(118,"code"),e.EFF(119,"@ApiGoneResponse()"),e.k0s()(),e.j41(120,"li")(121,"code"),e.EFF(122,"@ApiPayloadTooLargeResponse()"),e.k0s()(),e.j41(123,"li")(124,"code"),e.EFF(125,"@ApiUnsupportedMediaTypeResponse()"),e.k0s()(),e.j41(126,"li")(127,"code"),e.EFF(128,"@ApiUnprocessableEntityResponse()"),e.k0s()(),e.j41(129,"li")(130,"code"),e.EFF(131,"@ApiInternalServerErrorResponse()"),e.k0s()(),e.j41(132,"li")(133,"code"),e.EFF(134,"@ApiNotImplementedResponse()"),e.k0s()(),e.j41(135,"li")(136,"code"),e.EFF(137,"@ApiBadGatewayResponse()"),e.k0s()(),e.j41(138,"li")(139,"code"),e.EFF(140,"@ApiServiceUnavailableResponse()"),e.k0s()(),e.j41(141,"li")(142,"code"),e.EFF(143,"@ApiGatewayTimeoutResponse()"),e.k0s()(),e.j41(144,"li")(145,"code"),e.EFF(146,"@ApiDefaultResponse()"),e.k0s()()(),e.j41(147,"app-copy-button")(148,"pre")(149,"code",7),e.EFF(150,"\n@Post()\n@ApiCreatedResponse({ description: 'L enregistrement a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s.'})\n@ApiForbiddenResponse({ description: 'Interdit.'})\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.k0s()()(),e.j41(151,"p"),e.EFF(152,"Pour sp\xe9cifier un mod\xe8le de retour pour une requ\xeate, nous devons cr\xe9er une classe et annoter toutes les propri\xe9t\xe9s avec le d\xe9corateur "),e.j41(153,"code"),e.EFF(154,"@ApiProperty()"),e.k0s(),e.EFF(155,"."),e.k0s(),e.j41(156,"app-copy-button")(157,"pre")(158,"code",7),e.EFF(159,"\nexport class Cat {\n  @ApiProperty()\n  id: number;\n\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(160,"p"),e.EFF(161,"Le mod\xe8le "),e.j41(162,"code"),e.EFF(163,"Cat"),e.k0s(),e.EFF(164," peut alors \xeatre utilis\xe9 en combinaison avec la propri\xe9t\xe9 "),e.j41(165,"code"),e.EFF(166,"type"),e.k0s(),e.EFF(167," du d\xe9corateur de r\xe9ponse."),e.k0s(),e.j41(168,"app-copy-button")(169,"pre")(170,"code",7),e.EFF(171,"\n@ApiTags('cats')\n@Controller('cats')\nexport class CatsController {\n  @Post()\n  @ApiCreatedResponse({\n    description: 'L enregistrement a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s.',\n    type: Cat,\n  })\n  async create(@Body() createCatDto: CreateCatDto): Promise<Cat> {\n    return this.catsService.create(createCatDto);\n  }\n}\n"),e.k0s()()(),e.j41(172,"p"),e.EFF(173,"Ouvrons le navigateur et v\xe9rifions le mod\xe8le "),e.j41(174,"code"),e.EFF(175,"Cat"),e.k0s(),e.EFF(176," g\xe9n\xe9r\xe9 :"),e.k0s(),e.j41(177,"figure"),e.nrm(178,"img",10),e.k0s(),e.j41(179,"h4",11)(180,"span"),e.EFF(181,"T\xe9l\xe9chargement de fichiers"),e.k0s()(),e.j41(182,"p"),e.EFF(183,"Vous pouvez activer le t\xe9l\xe9chargement de fichiers pour une m\xe9thode sp\xe9cifique avec le d\xe9corateur "),e.j41(184,"code"),e.EFF(185,"@ApiBody"),e.k0s(),e.EFF(186," et "),e.j41(187,"code"),e.EFF(188,"@ApiConsumes()"),e.k0s(),e.EFF(189,". Voici un exemple complet utilisant la technique de "),e.j41(190,"a",12),e.EFF(191,"T\xe9l\xe9chargement de fichiers"),e.k0s(),e.EFF(192," :"),e.k0s(),e.j41(193,"app-copy-button")(194,"pre")(195,"code",7),e.EFF(196,"\n@UseInterceptors(FileInterceptor('file'))\n@ApiConsumes('multipart/form-data')\n@ApiBody({\n  description: 'Liste des chats',\n  type: FileUploadDto,\n})\nuploadFile(@UploadedFile() file) {}\n"),e.k0s()()(),e.j41(197,"p"),e.EFF(198,"O\xf9 "),e.j41(199,"code"),e.EFF(200,"FileUploadDto"),e.k0s(),e.EFF(201," est d\xe9fini comme suit :"),e.k0s(),e.j41(202,"app-copy-button")(203,"pre")(204,"code",7),e.EFF(205,"\nclass FileUploadDto {\n  @ApiProperty({ type: 'string', format: 'binary' })\n  file: any;\n}\n"),e.k0s()()(),e.j41(206,"p"),e.EFF(207,"Pour g\xe9rer le t\xe9l\xe9chargement de plusieurs fichiers, vous pouvez d\xe9finir "),e.j41(208,"code"),e.EFF(209,"FilesUploadDto"),e.k0s(),e.EFF(210," comme suit :"),e.k0s(),e.j41(211,"app-copy-button")(212,"pre")(213,"code",7),e.EFF(214,"\nclass FilesUploadDto {\n  @ApiProperty({ type: 'array', items: { type: 'string', format: 'binary' } })\n  files: any[];\n}\n"),e.k0s()()(),e.j41(215,"h4",13)(216,"span"),e.EFF(217,"Extensions"),e.k0s()(),e.j41(218,"p"),e.EFF(219,"Pour ajouter une extension \xe0 une requ\xeate, utilisez le d\xe9corateur "),e.j41(220,"code"),e.EFF(221,"@ApiExtension()"),e.k0s(),e.EFF(222,". Le nom de l'extension doit \xeatre pr\xe9fix\xe9 par "),e.j41(223,"code"),e.EFF(224,"x-"),e.k0s(),e.EFF(225,"."),e.k0s(),e.j41(226,"app-copy-button")(227,"pre")(228,"code",7),e.EFF(229,"\n@ApiExtension('x-foo', { hello: 'world' })\n"),e.k0s()()(),e.j41(230,"h4",14)(231,"span"),e.EFF(232,"Avanc\xe9 : G\xe9n\xe9rique "),e.j41(233,"code"),e.EFF(234,"ApiResponse"),e.k0s()()(),e.j41(235,"p"),e.EFF(236,"Avec la possibilit\xe9 de fournir des [d\xe9finitions brutes] (/openapi/types-and-parameters#d\xe9finitions-brutes), nous pouvons d\xe9finir un sch\xe9ma g\xe9n\xe9rique pour l'interface utilisateur de Swagger. Supposons que nous ayons le DTO suivant :"),e.k0s(),e.j41(237,"app-copy-button")(238,"pre")(239,"code",15),e.EFF(240,"\nexport class PaginatedDto<TData> {\n  @ApiProperty()\n  total: number;\n\n  @ApiProperty()\n  limit: number;\n\n  @ApiProperty()\n  offset: number;\n\n  results: TData[];\n}\n"),e.k0s()()(),e.j41(241,"p"),e.EFF(242,"Nous sautons la d\xe9coration de "),e.j41(243,"code"),e.EFF(244,"results"),e.k0s(),e.EFF(245," car nous lui fournirons une d\xe9finition brute plus tard. Maintenant, d\xe9finissons un autre DTO et nommons-le, par exemple, "),e.j41(246,"code"),e.EFF(247,"CatDto"),e.k0s(),e.EFF(248,", comme suit :"),e.k0s(),e.j41(249,"app-copy-button")(250,"pre")(251,"code",15),e.EFF(252,"\nexport class CatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(253,"p"),e.EFF(254,"Nous pouvons alors d\xe9finir une r\xe9ponse "),e.j41(255,"code"),e.EFF(256,"PaginatedDto<CatDto>"),e.k0s(),e.EFF(257,", comme suit :"),e.k0s(),e.j41(258,"app-copy-button")(259,"pre")(260,"code",15),e.EFF(261,"\n@ApiOkResponse({\n  schema: {\n    allOf: [\n      { $ref: getSchemaPath(PaginatedDto) },\n      {\n        properties: {\n          results: {\n            type: 'array',\n            items: { $ref: getSchemaPath(CatDto) },\n          },\n        },\n      },\n    ],\n  },\n})\nasync findAll(): Promise<PaginatedDto<CatDto>> {}\n"),e.k0s()()(),e.j41(262,"p"),e.EFF(263,"Dans cet exemple, nous sp\xe9cifions que la r\xe9ponse aura allOf "),e.j41(264,"code"),e.EFF(265,"PaginatedDto"),e.k0s(),e.EFF(266," et que la propri\xe9t\xe9 "),e.j41(267,"code"),e.EFF(268,"results"),e.k0s(),e.EFF(269," sera de type "),e.j41(270,"code"),e.EFF(271,"Array<CatDto>"),e.k0s(),e.EFF(272,"."),e.k0s(),e.j41(273,"ul")(274,"li"),e.EFF(275,"La fonction "),e.j41(276,"code"),e.EFF(277,"getSchemaPath()"),e.k0s(),e.EFF(278," qui renvoie le chemin du sch\xe9ma OpenAPI \xe0 partir du fichier de sp\xe9cification OpenAPI pour un mod\xe8le donn\xe9."),e.k0s(),e.j41(279,"li")(280,"code"),e.EFF(281,"allOf"),e.k0s(),e.EFF(282," est un concept fourni par l'OAS 3 pour couvrir divers cas d'utilisation li\xe9s \xe0 l'h\xe9ritage."),e.k0s()(),e.j41(283,"p"),e.EFF(284,"Enfin, puisque "),e.j41(285,"code"),e.EFF(286,"PaginatedDto"),e.k0s(),e.EFF(287," n'est pas directement r\xe9f\xe9renc\xe9 par un contr\xf4leur, le "),e.j41(288,"code"),e.EFF(289,"SwaggerModule"),e.k0s(),e.EFF(290," ne sera pas capable de g\xe9n\xe9rer une d\xe9finition de mod\xe8le correspondante pour le moment. Dans ce cas, nous devons l'ajouter en tant que "),e.j41(291,"a",16),e.EFF(292,"mod\xe8le additionnel"),e.k0s(),e.EFF(293,". Par exemple, nous pouvons utiliser le d\xe9corateur "),e.j41(294,"code"),e.EFF(295,"@ApiExtraModels()"),e.k0s(),e.EFF(296," au niveau du contr\xf4leur, comme suit :"),e.k0s(),e.j41(297,"app-copy-button")(298,"pre")(299,"code",15),e.EFF(300,"\n@Controller('cats')\n@ApiExtraModels(PaginatedDto)\nexport class CatsController {}\n"),e.k0s()()(),e.j41(301,"p"),e.EFF(302,"Si vous lancez Swagger maintenant, le fichier "),e.j41(303,"code"),e.EFF(304,"swagger.json"),e.k0s(),e.EFF(305," g\xe9n\xe9r\xe9 pour ce point de terminaison sp\xe9cifique devrait avoir la r\xe9ponse suivante d\xe9finie :"),e.k0s(),e.j41(306,"pre")(307,"code",17),e.EFF(308,'\n"responses": {\n  "200": {\n    "description": "",\n    "content": {\n      "application/json": {\n        "schema": {\n          "allOf": [\n            {\n              "$ref": "#/components/schemas/PaginatedDto"\n            },\n            {\n              "properties": {\n                "results": {\n                  "$ref": "#/components/schemas/CatDto"\n                }\n              }\n            }\n          ]\n        }\n      }\n    }\n  }\n}\n'),e.k0s()(),e.j41(309,"p"),e.EFF(310,"Pour le rendre r\xe9utilisable, nous pouvons cr\xe9er un d\xe9corateur personnalis\xe9 pour "),e.j41(311,"code"),e.EFF(312,"PaginatedDto"),e.k0s(),e.EFF(313,", comme suit :"),e.k0s(),e.j41(314,"app-copy-button")(315,"pre")(316,"code",15),e.EFF(317,"\nexport const ApiPaginatedResponse = <TModel extends Type<any>>(\n  model: TModel,\n) => {\n  return applyDecorators(\n    ApiExtraModels(PaginatedDto, model),\n    ApiOkResponse({\n      schema: {\n        allOf: [\n          { $ref: getSchemaPath(PaginatedDto) },\n          {\n            properties: {\n              results: {\n                type: 'array',\n                items: { $ref: getSchemaPath(model) },\n              },\n            },\n          },\n        ],\n      },\n    }),\n  );\n};\n"),e.k0s()()(),e.j41(318,"blockquote",18)(319,"strong"),e.EFF(320,"Astuce"),e.k0s(),e.EFF(321," L'interface "),e.j41(322,"code"),e.EFF(323,"Type<any>"),e.k0s(),e.EFF(324," et la fonction "),e.j41(325,"code"),e.EFF(326,"applyDecorators"),e.k0s(),e.EFF(327," sont import\xe9es du paquet "),e.j41(328,"code"),e.EFF(329,"@nestjs/common"),e.k0s(),e.EFF(330,".\n"),e.k0s(),e.j41(331,"p"),e.EFF(332,"Pour s'assurer que "),e.j41(333,"code"),e.EFF(334,"SwaggerModule"),e.k0s(),e.EFF(335," g\xe9n\xe8re une d\xe9finition pour notre mod\xe8le, nous devons l'ajouter comme un mod\xe8le suppl\xe9mentaire, comme nous l'avons fait plus t\xf4t avec le "),e.j41(336,"code"),e.EFF(337,"PaginatedDto"),e.k0s(),e.EFF(338," dans le contr\xf4leur."),e.k0s(),e.j41(339,"p"),e.EFF(340,"Avec ceci en place, nous pouvons utiliser le d\xe9corateur personnalis\xe9 "),e.j41(341,"code"),e.EFF(342,"@ApiPaginatedResponse()"),e.k0s(),e.EFF(343," sur notre point de terminaison :"),e.k0s(),e.j41(344,"app-copy-button")(345,"pre")(346,"code",15),e.EFF(347,"\n@ApiPaginatedResponse(CatDto)\nasync findAll(): Promise<PaginatedDto<CatDto>> {}\n"),e.k0s()()(),e.j41(348,"p"),e.EFF(349,"Pour les outils de g\xe9n\xe9ration de clients, cette approche pose une ambigu\xeft\xe9 sur la fa\xe7on dont le "),e.j41(350,"code"),e.EFF(351,"PaginatedResponse<TModel>"),e.k0s(),e.EFF(352," est g\xe9n\xe9r\xe9 pour le client. L'extrait suivant est un exemple de r\xe9sultat d'un g\xe9n\xe9rateur de client pour le point d'arriv\xe9e "),e.j41(353,"code"),e.EFF(354,"GET /"),e.k0s(),e.EFF(355," ci-dessus."),e.k0s(),e.j41(356,"app-copy-button")(357,"pre")(358,"code",7),e.EFF(359,"\n// Angular\nfindAll(): Observable<{ total: number, limit: number, offset: number, results: CatDto[] }>\n"),e.k0s()()(),e.j41(360,"p"),e.EFF(361,"Comme vous pouvez le voir, le "),e.j41(362,"strong"),e.EFF(363,"Type de retour"),e.k0s(),e.EFF(364," ici est ambigu. Pour contourner ce probl\xe8me, vous pouvez ajouter une propri\xe9t\xe9 "),e.j41(365,"code"),e.EFF(366,"title"),e.k0s(),e.EFF(367," au "),e.j41(368,"code"),e.EFF(369,"schema"),e.k0s(),e.EFF(370," pour "),e.j41(371,"code"),e.EFF(372,"ApiPaginatedResponse"),e.k0s(),e.EFF(373," :"),e.k0s(),e.j41(374,"app-copy-button")(375,"pre")(376,"code",7),e.EFF(377,"\nexport const ApiPaginatedResponse = <TModel extends Type<any>>(model: TModel) => {\n  return applyDecorators(\n    ApiOkResponse({\n      schema: {\n        title: `PaginatedResponseOf${model.name}`,\n        allOf: [\n          // ...\n        ],\n      },\n    }),\n  );\n};\n"),e.k0s()()(),e.j41(378,"p"),e.EFF(379,"Le r\xe9sultat de l'outil de g\xe9n\xe9ration de clients est maintenant le suivant :"),e.k0s(),e.j41(380,"app-copy-button")(381,"pre")(382,"code",15),e.EFF(383,"\n// Angular\nfindAll(): Observable<PaginatedResponseOfCatDto>\n"),e.k0s()()()())},dependencies:[a.a,i.z,p.Wk],encapsulation:2,changeDetection:0})}return t})(),y=(()=>{class t extends u.y{static \u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-openapi-other-features"]],features:[e.Vt3],decls:127,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/Lou8is/docs.nestjs.fr/edit/main/content/openapi/other-features.md","aria-label","Proposer des modifications","title","Proposer des modifications"],[1,"fas","fa-edit"],["id","autres-fonctionnalit\xe9s"],["appAnchor","","id","pr\xe9fixe-global"],[1,"language-typescript"],["appAnchor","","id","param\xe8tres-globaux"],["appAnchor","","id","sp\xe9cifications-multiples"],[1,"language-bash"],["src","/assets/swagger-cats.png"],["src","/assets/swagger-dogs.png"],["appAnchor","","id","menu-d\xe9roulant-dans-la-barre-dexploration"],[1,"info"],["href","/openapi/introduction#options-de-configuration"]],template:function(s,o){1&s&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Autres fonctionnalit\xe9s"),e.k0s(),e.j41(7,"p"),e.EFF(8,"Cette page \xe9num\xe8re toutes les autres fonctions disponibles qui peuvent vous \xeatre utiles."),e.k0s(),e.j41(9,"h4",6)(10,"span"),e.EFF(11,"Pr\xe9fixe global"),e.k0s()(),e.j41(12,"p"),e.EFF(13,"Pour ignorer un pr\xe9fixe global pour les routes d\xe9finies par "),e.j41(14,"code"),e.EFF(15,"setGlobalPrefix()"),e.k0s(),e.EFF(16,", utilisez "),e.j41(17,"code"),e.EFF(18,"ignoreGlobalPrefix"),e.k0s(),e.EFF(19," :"),e.k0s(),e.j41(20,"app-copy-button")(21,"pre")(22,"code",7),e.EFF(23,"\nconst document = SwaggerModule.createDocument(app, options, {\n  ignoreGlobalPrefix: true,\n});\n"),e.k0s()()(),e.j41(24,"h4",8)(25,"span"),e.EFF(26,"Param\xe8tres globaux"),e.k0s()(),e.j41(27,"p"),e.EFF(28,"Vous pouvez ajouter des d\xe9finitions de param\xe8tres \xe0 toutes les routes en utilisant "),e.j41(29,"code"),e.EFF(30,"DocumentBuilder"),e.k0s(),e.EFF(31," :"),e.k0s(),e.j41(32,"app-copy-button")(33,"pre")(34,"code",7),e.EFF(35,"\nconst options = new DocumentBuilder().addGlobalParameters({\n  name: 'tenantId',\n  in: 'header',\n});\n"),e.k0s()()(),e.j41(36,"h4",9)(37,"span"),e.EFF(38,"Sp\xe9cifications multiples"),e.k0s()(),e.j41(39,"p"),e.EFF(40,"Le "),e.j41(41,"code"),e.EFF(42,"SwaggerModule"),e.k0s(),e.EFF(43," fournit un moyen de supporter des sp\xe9cifications multiples. En d'autres termes, vous pouvez servir diff\xe9rentes documentations, avec diff\xe9rentes interfaces utilisateur, sur diff\xe9rents points d'acc\xe8s."),e.k0s(),e.j41(44,"p"),e.EFF(45,"Pour supporter des sp\xe9cifications multiples, votre application doit \xeatre \xe9crite avec une approche modulaire. La m\xe9thode "),e.j41(46,"code"),e.EFF(47,"createDocument()"),e.k0s(),e.EFF(48," prend un troisi\xe8me argument, "),e.j41(49,"code"),e.EFF(50,"extraOptions"),e.k0s(),e.EFF(51,", qui est un objet avec une propri\xe9t\xe9 nomm\xe9e "),e.j41(52,"code"),e.EFF(53,"include"),e.k0s(),e.EFF(54,". La propri\xe9t\xe9 "),e.j41(55,"code"),e.EFF(56,"include"),e.k0s(),e.EFF(57," prend une valeur qui est un tableau de modules."),e.k0s(),e.j41(58,"p"),e.EFF(59,"Vous pouvez configurer le support de sp\xe9cifications multiples comme indiqu\xe9 ci-dessous :"),e.k0s(),e.j41(60,"app-copy-button")(61,"pre")(62,"code",7),e.EFF(63,"\nimport { NestFactory } from '@nestjs/core';\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\nimport { CatsModule } from './cats/cats.module';\nimport { DogsModule } from './dogs/dogs.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  /**\n   * createDocument(application, configurationOptions, extraOptions);\n   *\n   * La m\xe9thode createDocument prend un troisi\xe8me argument optionnel \"extraOptions\"\n   * qui est un objet avec la propri\xe9t\xe9 \"include\" o\xf9 vous pouvez passer un tableau \n   * de modules que vous voulez inclure dans cette sp\xe9cification Swagger : \n   * CatsModule et DogsModule auront deux sp\xe9cifications Swagger distinctes qui seront expos\xe9es \n   * sur deux SwaggerUI diff\xe9rentes avec deux points de terminaison diff\xe9rents.\n   */\n\n  const options = new DocumentBuilder()\n    .setTitle('Cats example')\n    .setDescription('The cats API description')\n    .setVersion('1.0')\n    .addTag('cats')\n    .build();\n\n  const catDocumentFactory = () =>\n    SwaggerModule.createDocument(app, options, {\n      include: [CatsModule],\n    });\n  SwaggerModule.setup('api/cats', app, catDocumentFactory);\n\n  const secondOptions = new DocumentBuilder()\n    .setTitle('Dogs example')\n    .setDescription('The dogs API description')\n    .setVersion('1.0')\n    .addTag('dogs')\n    .build();\n\n  const dogDocumentFactory = () =>\n    SwaggerModule.createDocument(app, secondOptions, {\n      include: [DogsModule],\n    });\n  SwaggerModule.setup('api/dogs', app, dogDocumentFactory);\n\n  await app.listen(process.env.PORT ?? 3000);\n}\nbootstrap();\n"),e.k0s()()(),e.j41(64,"p"),e.EFF(65,"Vous pouvez maintenant d\xe9marrer votre serveur avec la commande suivante :"),e.k0s(),e.j41(66,"pre")(67,"code",10),e.EFF(68,"\n$ npm run start\n"),e.k0s()(),e.j41(69,"p"),e.EFF(70,"Naviguez vers "),e.j41(71,"code"),e.EFF(72,"http://localhost:3000/api/cats"),e.k0s(),e.EFF(73," pour voir l'interface utilisateur Swagger pour les "),e.j41(74,"code"),e.EFF(75,"cats"),e.k0s(),e.EFF(76," :"),e.k0s(),e.j41(77,"figure"),e.nrm(78,"img",11),e.k0s(),e.j41(79,"p"),e.EFF(80,"A son tour, "),e.j41(81,"code"),e.EFF(82,"http://localhost:3000/api/dogs"),e.k0s(),e.EFF(83," exposera l'interface Swagger pour les "),e.j41(84,"code"),e.EFF(85,"dogs"),e.k0s(),e.EFF(86," :"),e.k0s(),e.j41(87,"figure"),e.nrm(88,"img",12),e.k0s(),e.j41(89,"h4",13)(90,"span"),e.EFF(91,"Menu d\xe9roulant dans la barre d'exploration"),e.k0s()(),e.j41(92,"p"),e.EFF(93,"Pour activer le support de multiples sp\xe9cifications dans le menu d\xe9roulant de la barre d'exploration, vous devrez mettre "),e.j41(94,"code"),e.EFF(95,"explorer : true"),e.k0s(),e.EFF(96," et configurer "),e.j41(97,"code"),e.EFF(98,"swaggerOptions.urls"),e.k0s(),e.EFF(99," dans votre "),e.j41(100,"code"),e.EFF(101,"SwaggerCustomOptions"),e.k0s(),e.EFF(102,"."),e.k0s(),e.j41(103,"blockquote",14)(104,"strong"),e.EFF(105,"Astuce"),e.k0s(),e.EFF(106," Assurez-vous que "),e.j41(107,"code"),e.EFF(108,"swaggerOptions.urls"),e.k0s(),e.EFF(109," pointe vers le format JSON de vos documents Swagger ! Pour sp\xe9cifier le document JSON, utilisez "),e.j41(110,"code"),e.EFF(111,"jsonDocumentUrl"),e.k0s(),e.EFF(112," dans "),e.j41(113,"code"),e.EFF(114,"SwaggerCustomOptions"),e.k0s(),e.EFF(115,". Pour plus d'options de configuration, consultez "),e.j41(116,"a",15),e.EFF(117,"ici"),e.k0s(),e.EFF(118,".\n"),e.j41(119,"p"),e.EFF(120,"Voici comment d\xe9finir plusieurs sp\xe9cifications \xe0 partir d'une liste d\xe9roulante dans la barre d'exploration :"),e.k0s()(),e.j41(121,"app-copy-button")(122,"pre")(123,"code",7),e.EFF(124,"\nimport { NestFactory } from '@nestjs/core';\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\nimport { CatsModule } from './cats/cats.module';\nimport { DogsModule } from './dogs/dogs.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  // Main API options\n  const options = new DocumentBuilder()\n    .setTitle('Multiple Specifications Example')\n    .setDescription('Description for multiple specifications')\n    .setVersion('1.0')\n    .build();\n\n  // Create main API document\n  const document = SwaggerModule.createDocument(app, options);\n\n  // Setup main API Swagger UI with dropdown support\n  SwaggerModule.setup('api', app, document, {\n    explorer: true,\n    swaggerOptions: {\n      urls: [\n        {\n          name: '1. API',\n          url: 'api/swagger.json',\n        },\n        {\n          name: '2. Cats API',\n          url: 'api/cats/swagger.json',\n        },\n        {\n          name: '3. Dogs API',\n          url: 'api/dogs/swagger.json',\n        },\n      ],\n    },\n    jsonDocumentUrl: '/api/swagger.json',\n  });\n\n  // Cats API options\n  const catOptions = new DocumentBuilder()\n    .setTitle('Cats Example')\n    .setDescription('Description for the Cats API')\n    .setVersion('1.0')\n    .addTag('cats')\n    .build();\n\n  // Create Cats API document\n  const catDocument = SwaggerModule.createDocument(app, catOptions, {\n    include: [CatsModule],\n  });\n\n  // Setup Cats API Swagger UI\n  SwaggerModule.setup('api/cats', app, catDocument, {\n    jsonDocumentUrl: '/api/cats/swagger.json',\n  });\n\n  // Dogs API options\n  const dogOptions = new DocumentBuilder()\n    .setTitle('Dogs Example')\n    .setDescription('Description for the Dogs API')\n    .setVersion('1.0')\n    .addTag('dogs')\n    .build();\n\n  // Create Dogs API document\n  const dogDocument = SwaggerModule.createDocument(app, dogOptions, {\n    include: [DogsModule],\n  });\n\n  // Setup Dogs API Swagger UI\n  SwaggerModule.setup('api/dogs', app, dogDocument, {\n    jsonDocumentUrl: '/api/dogs/swagger.json',\n  });\n\n  await app.listen(3000);\n}\n\nbootstrap();\n"),e.k0s()()(),e.j41(125,"p"),e.EFF(126,"Dans cet exemple, nous avons mis en place une API principale ainsi que des sp\xe9cifications distinctes pour les chats et les chiens, chacune \xe9tant accessible \xe0 partir du menu d\xe9roulant de la barre d'exploration."),e.k0s()())},dependencies:[a.a,i.z],encapsulation:2,changeDetection:0})}return t})(),A=(()=>{class t extends u.y{static \u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-openapi-security"]],features:[e.Vt3],decls:117,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/Lou8is/docs.nestjs.fr/edit/main/content/openapi/security.md","aria-label","Proposer des modifications","title","Proposer des modifications"],[1,"fas","fa-edit"],["id","s\xe9curit\xe9"],[1,"language-typescript"],["appAnchor","","id","authentification-de-base"],["appAnchor","","id","authentification-du-porteur"],["appAnchor","","id","authentification-oauth2"],["appAnchor","","id","authentification-par-cookie"]],template:function(s,o){1&s&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"S\xe9curit\xe9"),e.k0s(),e.j41(7,"p"),e.EFF(8,"Pour d\xe9finir les m\xe9canismes de s\xe9curit\xe9 \xe0 utiliser pour une op\xe9ration sp\xe9cifique, utilisez le d\xe9corateur "),e.j41(9,"code"),e.EFF(10,"@ApiSecurity()"),e.k0s(),e.EFF(11,"."),e.k0s(),e.j41(12,"app-copy-button")(13,"pre")(14,"code",6),e.EFF(15,"\n@ApiSecurity('basic')\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(16,"p"),e.EFF(17,"Avant de lancer votre application, n'oubliez pas d'ajouter la d\xe9finition de s\xe9curit\xe9 \xe0 votre document de base en utilisant "),e.j41(18,"code"),e.EFF(19,"DocumentBuilder"),e.k0s(),e.EFF(20," :"),e.k0s(),e.j41(21,"app-copy-button")(22,"pre")(23,"code",6),e.EFF(24,"\nconst options = new DocumentBuilder().addSecurity('basic', {\n  type: 'http',\n  scheme: 'basic',\n});\n"),e.k0s()()(),e.j41(25,"p"),e.EFF(26,"Certaines des techniques d'authentification les plus populaires sont int\xe9gr\xe9es (par exemple, "),e.j41(27,"code"),e.EFF(28,"basic"),e.k0s(),e.EFF(29," et "),e.j41(30,"code"),e.EFF(31,"bearer"),e.k0s(),e.EFF(32,") et vous n'avez donc pas \xe0 d\xe9finir manuellement les m\xe9canismes de s\xe9curit\xe9 comme indiqu\xe9 ci-dessus."),e.k0s(),e.j41(33,"h4",7)(34,"span"),e.EFF(35,"Authentification de base"),e.k0s()(),e.j41(36,"p"),e.EFF(37,"Pour activer l'authentification de base, utilisez "),e.j41(38,"code"),e.EFF(39,"@ApiBasicAuth()"),e.k0s(),e.EFF(40,"."),e.k0s(),e.j41(41,"app-copy-button")(42,"pre")(43,"code",6),e.EFF(44,"\n@ApiBasicAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(45,"p"),e.EFF(46,"Avant de lancer votre application, n'oubliez pas d'ajouter la d\xe9finition de s\xe9curit\xe9 \xe0 votre document de base en utilisant "),e.j41(47,"code"),e.EFF(48,"DocumentBuilder"),e.k0s(),e.EFF(49," :"),e.k0s(),e.j41(50,"app-copy-button")(51,"pre")(52,"code",6),e.EFF(53,"\nconst options = new DocumentBuilder().addBasicAuth();\n"),e.k0s()()(),e.j41(54,"h4",8)(55,"span"),e.EFF(56,"Authentification du porteur"),e.k0s()(),e.j41(57,"p"),e.EFF(58,"Pour activer l'authentification du porteur, utilisez "),e.j41(59,"code"),e.EFF(60,"@ApiBearerAuth()"),e.k0s(),e.EFF(61,"."),e.k0s(),e.j41(62,"app-copy-button")(63,"pre")(64,"code",6),e.EFF(65,"\n@ApiBearerAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(66,"p"),e.EFF(67,"Avant de lancer votre application, n'oubliez pas d'ajouter la d\xe9finition de s\xe9curit\xe9 \xe0 votre document de base en utilisant "),e.j41(68,"code"),e.EFF(69,"DocumentBuilder"),e.k0s(),e.EFF(70," :"),e.k0s(),e.j41(71,"app-copy-button")(72,"pre")(73,"code",6),e.EFF(74,"\nconst options = new DocumentBuilder().addBearerAuth();\n"),e.k0s()()(),e.j41(75,"h4",9)(76,"span"),e.EFF(77,"Authentification OAuth2"),e.k0s()(),e.j41(78,"p"),e.EFF(79,"Pour activer OAuth2, utilisez "),e.j41(80,"code"),e.EFF(81,"@ApiOAuth2()"),e.k0s(),e.EFF(82,"."),e.k0s(),e.j41(83,"app-copy-button")(84,"pre")(85,"code",6),e.EFF(86,"\n@ApiOAuth2(['pets:write'])\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(87,"p"),e.EFF(88,"Avant de lancer votre application, n'oubliez pas d'ajouter la d\xe9finition de s\xe9curit\xe9 \xe0 votre document de base en utilisant "),e.j41(89,"code"),e.EFF(90,"DocumentBuilder"),e.k0s(),e.EFF(91," :"),e.k0s(),e.j41(92,"app-copy-button")(93,"pre")(94,"code",6),e.EFF(95,"\nconst options = new DocumentBuilder().addOAuth2();\n"),e.k0s()()(),e.j41(96,"h4",10)(97,"span"),e.EFF(98,"Authentification par cookie"),e.k0s()(),e.j41(99,"p"),e.EFF(100,"Pour activer l'authentification par cookie, utilisez "),e.j41(101,"code"),e.EFF(102,"@ApiCookieAuth()"),e.k0s(),e.EFF(103,"."),e.k0s(),e.j41(104,"app-copy-button")(105,"pre")(106,"code",6),e.EFF(107,"\n@ApiCookieAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.k0s()()(),e.j41(108,"p"),e.EFF(109,"Avant de lancer votre application, n'oubliez pas d'ajouter la d\xe9finition de s\xe9curit\xe9 \xe0 votre document de base en utilisant "),e.j41(110,"code"),e.EFF(111,"DocumentBuilder"),e.k0s(),e.EFF(112," :"),e.k0s(),e.j41(113,"app-copy-button")(114,"pre")(115,"code",6),e.EFF(116,"\nconst options = new DocumentBuilder().addCookieAuth('optional-session-id');\n"),e.k0s()()()())},dependencies:[a.a,i.z],encapsulation:2,changeDetection:0})}return t})();var b=r(8149);const P=[{path:"introduction",component:k,data:{title:"OpenAPI (Swagger)"}},{path:"types-and-parameters",component:(()=>{class t extends u.y{static \u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})();static \u0275cmp=e.VBU({type:t,selectors:[["app-openapi-types-parameters"]],features:[e.Vt3],decls:481,vars:0,consts:[["contentReference",""],[1,"content"],[1,"github-links"],["href","https://github.com/Lou8is/docs.nestjs.fr/edit/main/content/openapi/types-and-parameters.md","aria-label","Proposer des modifications","title","Proposer des modifications"],[1,"fas","fa-edit"],["id","types-et-param\xe8tres"],[1,"language-typescript"],[1,"info"],["src","/assets/swagger-dto.png"],["routerLink","/openapi/cli-plugin"],["src","/assets/swagger-dto2.png"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/#schemaObject"],["appAnchor","","id","tableaux"],["appAnchor","","id","d\xe9pendances-circulaires"],["appAnchor","","id","g\xe9n\xe9riques-et-interfaces"],["appAnchor","","id","enums"],["src","/assets/enum_query.gif"],["src","/assets/enum_query_array.gif"],["appAnchor","","id","sch\xe9ma-des-enums"],["rel","nofollow","target","_blank","href","https://swagger.io/docs/specification/data-models/enums/"],[1,"language-yaml"],["rel","nofollow","target","_blank","href","https://github.com/RicoSuter/NSwag"],["appAnchor","","id","exemples-de-valeurs-de-propri\xe9t\xe9s"],["appAnchor","","id","d\xe9finitions-brutes"],["appAnchor","","id","mod\xe8les-additionnels"],["appAnchor","","id","oneof-anyof-allof"],["rel","nofollow","target","_blank","href","https://swagger.io/docs/specification/data-models/oneof-anyof-allof-not/"],["appAnchor","","id","nom-et-description-du-sch\xe9ma"]],template:function(s,o){1&s&&(e.j41(0,"div",1,0)(2,"div",2)(3,"a",3),e.nrm(4,"i",4),e.k0s()(),e.j41(5,"h3",5),e.EFF(6,"Types et param\xe8tres"),e.k0s(),e.j41(7,"p"),e.EFF(8,"Le "),e.j41(9,"code"),e.EFF(10,"SwaggerModule"),e.k0s(),e.EFF(11," recherche tous les d\xe9corateurs "),e.j41(12,"code"),e.EFF(13,"@Body()"),e.k0s(),e.EFF(14,", "),e.j41(15,"code"),e.EFF(16,"@Query()"),e.k0s(),e.EFF(17,", et "),e.j41(18,"code"),e.EFF(19,"@Param()"),e.k0s(),e.EFF(20," dans les gestionnaires de route pour g\xe9n\xe9rer le document API. Il cr\xe9e \xe9galement les d\xe9finitions de mod\xe8le correspondantes en tirant parti de la r\xe9flexion. Consid\xe9rons le code suivant :"),e.k0s(),e.j41(21,"app-copy-button")(22,"pre")(23,"code",6),e.EFF(24,"\n@Post()\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.k0s()()(),e.j41(25,"blockquote",7)(26,"strong"),e.EFF(27,"Astuce"),e.k0s(),e.EFF(28," Pour d\xe9finir explicitement la d\xe9finition du corps, utilisez le d\xe9corateur "),e.j41(29,"code"),e.EFF(30,"@ApiBody()"),e.k0s(),e.EFF(31," (import\xe9 du paquet "),e.j41(32,"code"),e.EFF(33,"@nestjs/swagger"),e.k0s(),e.EFF(34,").\n"),e.k0s(),e.j41(35,"p"),e.EFF(36,"En se basant sur "),e.j41(37,"code"),e.EFF(38,"CreateCatDto"),e.k0s(),e.EFF(39,", l'interface Swagger de d\xe9finition de mod\xe8le suivante sera cr\xe9\xe9e :"),e.k0s(),e.j41(40,"figure"),e.nrm(41,"img",8),e.k0s(),e.j41(42,"p"),e.EFF(43,"Comme vous pouvez le voir, la d\xe9finition est vide bien que la classe ait quelques propri\xe9t\xe9s d\xe9clar\xe9es. Afin de rendre les propri\xe9t\xe9s de la classe visibles par le "),e.j41(44,"code"),e.EFF(45,"SwaggerModule"),e.k0s(),e.EFF(46,", nous devons soit les annoter avec le d\xe9corateur "),e.j41(47,"code"),e.EFF(48,"@ApiProperty()"),e.k0s(),e.EFF(49,", soit utiliser le plugin CLI (voir la section "),e.j41(50,"a",9),e.EFF(51,"Plugin"),e.k0s(),e.EFF(52,") qui le fera automatiquement :"),e.k0s(),e.j41(53,"app-copy-button")(54,"pre")(55,"code",6),e.EFF(56,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.k0s()()(),e.j41(57,"blockquote",7)(58,"strong"),e.EFF(59,"Astuce"),e.k0s(),e.EFF(60," Au lieu d'annoter manuellement chaque propri\xe9t\xe9, vous pouvez utiliser le plugin Swagger (voir la section "),e.j41(61,"a",9),e.EFF(62,"Plugin"),e.k0s(),e.EFF(63,") qui le fera automatiquement pour vous.\n"),e.k0s(),e.j41(64,"p"),e.EFF(65,"Ouvrons le navigateur et v\xe9rifions le mod\xe8le "),e.j41(66,"code"),e.EFF(67,"CreateCatDto"),e.k0s(),e.EFF(68," g\xe9n\xe9r\xe9 :"),e.k0s(),e.j41(69,"figure"),e.nrm(70,"img",10),e.k0s(),e.j41(71,"p"),e.EFF(72,"En outre, le d\xe9corateur "),e.j41(73,"code"),e.EFF(74,"@ApiProperty()"),e.k0s(),e.EFF(75," permet de d\xe9finir diverses propri\xe9t\xe9s "),e.j41(76,"a",11),e.EFF(77,"Schema Object"),e.k0s(),e.EFF(78," :"),e.k0s(),e.j41(79,"app-copy-button")(80,"pre")(81,"code",6),e.EFF(82,"\n@ApiProperty({\n  description: 'The age of a cat',\n  minimum: 1,\n  default: 1,\n})\nage: number;\n"),e.k0s()()(),e.j41(83,"blockquote",7)(84,"strong"),e.EFF(85,"Astuce"),e.k0s(),e.EFF(86," Au lieu de taper explicitement la propri\xe9t\xe9 "),e.j41(87,"code"),e.EFF(88,'{{"@ApiProperty({ required : false })"}'),e.k0s(),e.EFF(89,", vous pouvez utiliser le d\xe9corateur "),e.j41(90,"code"),e.EFF(91,"@ApiPropertyOptional()"),e.k0s(),e.EFF(92,".\n"),e.k0s(),e.j41(93,"p"),e.EFF(94,"Pour d\xe9finir explicitement le type de la propri\xe9t\xe9, utilisez la cl\xe9 "),e.j41(95,"code"),e.EFF(96,"type"),e.k0s(),e.EFF(97," :"),e.k0s(),e.j41(98,"app-copy-button")(99,"pre")(100,"code",6),e.EFF(101,"\n@ApiProperty({\n  type: Number,\n})\nage: number;\n"),e.k0s()()(),e.j41(102,"h4",12)(103,"span"),e.EFF(104,"Tableaux"),e.k0s()(),e.j41(105,"p"),e.EFF(106,"Lorsque la propri\xe9t\xe9 est un tableau, nous devons indiquer manuellement le type de tableau comme indiqu\xe9 ci-dessous :"),e.k0s(),e.j41(107,"app-copy-button")(108,"pre")(109,"code",6),e.EFF(110,"\n@ApiProperty({ type: [String] })\nnames: string[];\n"),e.k0s()()(),e.j41(111,"blockquote",7)(112,"strong"),e.EFF(113,"Astuce"),e.k0s(),e.EFF(114," Pensez \xe0 utiliser le plugin Swagger (voir la section "),e.j41(115,"a",9),e.EFF(116,"Plugin"),e.k0s(),e.EFF(117,") qui d\xe9tectera automatiquement les tableaux.\n"),e.k0s(),e.j41(118,"p"),e.EFF(119,"Soit vous incluez le type en tant que premier \xe9l\xe9ment d'un tableau (comme indiqu\xe9 ci-dessus), soit vous d\xe9finissez la propri\xe9t\xe9 "),e.j41(120,"code"),e.EFF(121,"isArray"),e.k0s(),e.EFF(122," \xe0 "),e.j41(123,"code"),e.EFF(124,"true"),e.k0s(),e.EFF(125,"."),e.k0s(),e.j41(126,"p"),e.nrm(127,"app-banner-enterprise"),e.k0s(),e.j41(128,"h4",13)(129,"span"),e.EFF(130,"D\xe9pendances circulaires"),e.k0s()(),e.j41(131,"p"),e.EFF(132,"Lorsque vous avez des d\xe9pendances circulaires entre les classes, utilisez une fonction paresseuse pour fournir \xe0 "),e.j41(133,"code"),e.EFF(134,"SwaggerModule"),e.k0s(),e.EFF(135," des informations sur les types :"),e.k0s(),e.j41(136,"app-copy-button")(137,"pre")(138,"code",6),e.EFF(139,"\n@ApiProperty({ type: () => Node })\nnode: Node;\n"),e.k0s()()(),e.j41(140,"blockquote",7)(141,"strong"),e.EFF(142,"Astuce"),e.k0s(),e.EFF(143," Pensez \xe0 utiliser le plugin Swagger (voir la section "),e.j41(144,"a",9),e.EFF(145,"Plugin"),e.k0s(),e.EFF(146,") qui d\xe9tectera automatiquement les d\xe9pendances circulaires.\n"),e.k0s(),e.j41(147,"h4",14)(148,"span"),e.EFF(149,"G\xe9n\xe9riques et interfaces"),e.k0s()(),e.j41(150,"p"),e.EFF(151,"Comme TypeScript ne stocke pas de m\xe9tadonn\xe9es sur les g\xe9n\xe9riques ou les interfaces, lorsque vous les utilisez dans vos DTO, "),e.j41(152,"code"),e.EFF(153,"SwaggerModule"),e.k0s(),e.EFF(154," peut ne pas \xeatre capable de g\xe9n\xe9rer correctement des d\xe9finitions de mod\xe8les \xe0 l'ex\xe9cution. Par exemple, le code suivant ne sera pas correctement inspect\xe9 par le module Swagger :"),e.k0s(),e.j41(155,"app-copy-button")(156,"pre")(157,"code",6),e.EFF(158,"\ncreateBulk(@Body() usersDto: CreateUserDto[])\n"),e.k0s()()(),e.j41(159,"p"),e.EFF(160,"Afin de surmonter cette limitation, vous pouvez d\xe9finir le type de mani\xe8re explicite :"),e.k0s(),e.j41(161,"app-copy-button")(162,"pre")(163,"code",6),e.EFF(164,"\n@ApiBody({ type: [CreateUserDto] })\ncreateBulk(@Body() usersDto: CreateUserDto[])\n"),e.k0s()()(),e.j41(165,"h4",15)(166,"span"),e.EFF(167,"Enums"),e.k0s()(),e.j41(168,"p"),e.EFF(169,"Pour identifier un "),e.j41(170,"code"),e.EFF(171,"enum"),e.k0s(),e.EFF(172,", nous devons d\xe9finir manuellement la propri\xe9t\xe9 "),e.j41(173,"code"),e.EFF(174,"enum"),e.k0s(),e.EFF(175," sur la "),e.j41(176,"code"),e.EFF(177,"@ApiProperty"),e.k0s(),e.EFF(178," avec un tableau de valeurs."),e.k0s(),e.j41(179,"app-copy-button")(180,"pre")(181,"code",6),e.EFF(182,"\n@ApiProperty({ enum: ['Admin', 'Moderator', 'User']})\nrole: UserRole;\n"),e.k0s()()(),e.j41(183,"p"),e.EFF(184,"Vous pouvez \xe9galement d\xe9finir un enum TypeScript comme suit :"),e.k0s(),e.j41(185,"app-copy-button")(186,"pre")(187,"code",6),e.EFF(188,"\nexport enum UserRole {\n  Admin = 'Admin',\n  Moderator = 'Moderator',\n  User = 'User',\n}\n"),e.k0s()()(),e.j41(189,"p"),e.EFF(190,"Vous pouvez alors utiliser l'enum directement avec le d\xe9corateur de param\xe8tres "),e.j41(191,"code"),e.EFF(192,"@Query()"),e.k0s(),e.EFF(193," en combinaison avec le d\xe9corateur "),e.j41(194,"code"),e.EFF(195,"@ApiQuery()"),e.k0s(),e.EFF(196,"."),e.k0s(),e.j41(197,"app-copy-button")(198,"pre")(199,"code",6),e.EFF(200,"\n@ApiQuery({ name: 'role', enum: UserRole })\nasync filterByRole(@Query('role') role: UserRole = UserRole.User) {}\n"),e.k0s()()(),e.j41(201,"figure"),e.nrm(202,"img",16),e.k0s(),e.j41(203,"p"),e.EFF(204,"Avec "),e.j41(205,"code"),e.EFF(206,"isArray"),e.k0s(),e.EFF(207," fix\xe9 \xe0 "),e.j41(208,"strong"),e.EFF(209,"true"),e.k0s(),e.EFF(210,", le "),e.j41(211,"code"),e.EFF(212,"enum"),e.k0s(),e.EFF(213," peut \xeatre s\xe9lectionn\xe9 comme un "),e.j41(214,"strong"),e.EFF(215,"multi-select"),e.k0s(),e.EFF(216," :"),e.k0s(),e.j41(217,"figure"),e.nrm(218,"img",17),e.k0s(),e.j41(219,"h4",18)(220,"span"),e.EFF(221,"Sch\xe9ma des enums"),e.k0s()(),e.j41(222,"p"),e.EFF(223,"Par d\xe9faut, la propri\xe9t\xe9 "),e.j41(224,"code"),e.EFF(225,"enum"),e.k0s(),e.EFF(226," ajoutera une d\xe9finition brute de "),e.j41(227,"a",19),e.EFF(228,"Enum"),e.k0s(),e.EFF(229," sur le "),e.j41(230,"code"),e.EFF(231,"parameter"),e.k0s(),e.EFF(232,"."),e.k0s(),e.j41(233,"pre")(234,"code",20),e.EFF(235,"\n- breed:\n    type: 'string'\n    enum:\n      - Persian\n      - Tabby\n      - Siamese\n"),e.k0s()(),e.j41(236,"p"),e.EFF(237,"La sp\xe9cification ci-dessus fonctionne bien dans la plupart des cas. Cependant, si vous utilisez un outil qui prend la sp\xe9cification en "),e.j41(238,"strong"),e.EFF(239,"entr\xe9e"),e.k0s(),e.EFF(240," et g\xe9n\xe8re du code "),e.j41(241,"strong"),e.EFF(242,"client"),e.k0s(),e.EFF(243,", vous pouvez rencontrer un probl\xe8me avec le code g\xe9n\xe9r\xe9 qui contient des "),e.j41(244,"code"),e.EFF(245,"enums"),e.k0s(),e.EFF(246," dupliqu\xe9s. Consid\xe9rons l'extrait de code suivant :"),e.k0s(),e.j41(247,"app-copy-button")(248,"pre")(249,"code",6),e.EFF(250,"\n// code g\xe9n\xe9r\xe9 c\xf4t\xe9 client\nexport class CatDetail {\n  breed: CatDetailEnum;\n}\n\nexport class CatInformation {\n  breed: CatInformationEnum;\n}\n\nexport enum CatDetailEnum {\n  Persian = 'Persian',\n  Tabby = 'Tabby',\n  Siamese = 'Siamese',\n}\n\nexport enum CatInformationEnum {\n  Persian = 'Persian',\n  Tabby = 'Tabby',\n  Siamese = 'Siamese',\n}\n"),e.k0s()()(),e.j41(251,"blockquote",7)(252,"strong"),e.EFF(253,"Astuce"),e.k0s(),e.EFF(254," L'extrait ci-dessus est g\xe9n\xe9r\xe9 \xe0 l'aide d'un outil appel\xe9 "),e.j41(255,"a",21),e.EFF(256,"NSwag"),e.k0s(),e.EFF(257,".\n"),e.k0s(),e.j41(258,"p"),e.EFF(259,"Vous pouvez voir que vous avez maintenant deux "),e.j41(260,"code"),e.EFF(261,"enums"),e.k0s(),e.EFF(262," qui sont exactement les m\xeames.\nPour r\xe9soudre ce probl\xe8me, vous pouvez passer un "),e.j41(263,"code"),e.EFF(264,"enumName"),e.k0s(),e.EFF(265," avec la propri\xe9t\xe9 "),e.j41(266,"code"),e.EFF(267,"enum"),e.k0s(),e.EFF(268," dans votre d\xe9corateur."),e.k0s(),e.j41(269,"app-copy-button")(270,"pre")(271,"code",6),e.EFF(272,"\nexport class CatDetail {\n  @ApiProperty({ enum: CatBreed, enumName: 'CatBreed' })\n  breed: CatBreed;\n}\n"),e.k0s()()(),e.j41(273,"p"),e.EFF(274,"La propri\xe9t\xe9 "),e.j41(275,"code"),e.EFF(276,"enumName"),e.k0s(),e.EFF(277," permet \xe0 "),e.j41(278,"code"),e.EFF(279,"@nestjs/swagger"),e.k0s(),e.EFF(280," de transformer "),e.j41(281,"code"),e.EFF(282,"CatBreed"),e.k0s(),e.EFF(283," en son propre "),e.j41(284,"code"),e.EFF(285,"schema"),e.k0s(),e.EFF(286,", ce qui rend l'enum "),e.j41(287,"code"),e.EFF(288,"CatBreed"),e.k0s(),e.EFF(289," r\xe9utilisable. La sp\xe9cification ressemblera \xe0 ce qui suit :"),e.k0s(),e.j41(290,"pre")(291,"code",20),e.EFF(292,"\nCatDetail:\n  type: 'object'\n  properties:\n    ...\n    - breed:\n        schema:\n          $ref: '#/components/schemas/CatBreed'\nCatBreed:\n  type: string\n  enum:\n    - Persian\n    - Tabby\n    - Siamese\n"),e.k0s()(),e.j41(293,"blockquote",7)(294,"strong"),e.EFF(295,"Astuce"),e.k0s(),e.EFF(296," Tout "),e.j41(297,"strong"),e.EFF(298,"d\xe9corateur"),e.k0s(),e.EFF(299," qui prend "),e.j41(300,"code"),e.EFF(301,"enum"),e.k0s(),e.EFF(302," comme propri\xe9t\xe9 prendra aussi "),e.j41(303,"code"),e.EFF(304,"enumName"),e.k0s(),e.EFF(305,".\n"),e.k0s(),e.j41(306,"h4",22)(307,"span"),e.EFF(308,"Exemples de valeurs de propri\xe9t\xe9s"),e.k0s()(),e.j41(309,"p"),e.EFF(310,"Vous pouvez d\xe9finir un seul exemple pour une propri\xe9t\xe9 en utilisant la cl\xe9 "),e.j41(311,"code"),e.EFF(312,"example"),e.k0s(),e.EFF(313,", comme ceci :"),e.k0s(),e.j41(314,"app-copy-button")(315,"pre")(316,"code",6),e.EFF(317,"\n@ApiProperty({\n  example: 'persian',\n})\nbreed: string;\n"),e.k0s()()(),e.j41(318,"p"),e.EFF(319,"Si vous souhaitez fournir plusieurs exemples, vous pouvez utiliser la cl\xe9 "),e.j41(320,"code"),e.EFF(321,"examples"),e.k0s(),e.EFF(322," en passant un objet structur\xe9 comme suit :"),e.k0s(),e.j41(323,"app-copy-button")(324,"pre")(325,"code",6),e.EFF(326,"\n@ApiProperty({\n  examples: {\n    Persian: { value: 'persian' },\n    Tabby: { value: 'tabby' },\n    Siamese: { value: 'siamese' },\n    'Scottish Fold': { value: 'scottish_fold' },\n  },\n})\nbreed: string;\n"),e.k0s()()(),e.j41(327,"h4",23)(328,"span"),e.EFF(329,"D\xe9finitions brutes"),e.k0s()(),e.j41(330,"p"),e.EFF(331,"Dans certains cas, tels que les tableaux ou les matrices profond\xe9ment imbriqu\xe9s, vous devrez peut-\xeatre d\xe9finir manuellement votre type :"),e.k0s(),e.j41(332,"app-copy-button")(333,"pre")(334,"code",6),e.EFF(335,"\n@ApiProperty({\n  type: 'array',\n  items: {\n    type: 'array',\n    items: {\n      type: 'number',\n    },\n  },\n})\ncoords: number[][];\n"),e.k0s()()(),e.j41(336,"p"),e.EFF(337,"Vous pouvez \xe9galement sp\xe9cifier des sch\xe9mas d'objets bruts, comme ceci :"),e.k0s(),e.j41(338,"app-copy-button")(339,"pre")(340,"code",6),e.EFF(341,"\n@ApiProperty({\n  type: 'object',\n  properties: {\n    name: {\n      type: 'string',\n      example: 'Error'\n    },\n    status: {\n      type: 'number',\n      example: 400\n    }\n  },\n  required: ['name', 'status']\n})\nrawDefinition: Record<string, any>;\n"),e.k0s()()(),e.j41(342,"p"),e.EFF(343,"Pour d\xe9finir manuellement le contenu de vos entr\xe9es/sorties dans les classes de contr\xf4leurs, utilisez la propri\xe9t\xe9 "),e.j41(344,"code"),e.EFF(345,"schema"),e.k0s(),e.EFF(346," :"),e.k0s(),e.j41(347,"app-copy-button")(348,"pre")(349,"code",6),e.EFF(350,"\n@ApiBody({\n  schema: {\n    type: 'array',\n    items: {\n      type: 'array',\n      items: {\n        type: 'number',\n      },\n    },\n  },\n})\nasync create(@Body() coords: number[][]) {}\n"),e.k0s()()(),e.j41(351,"h4",24)(352,"span"),e.EFF(353,"Mod\xe8les additionnels"),e.k0s()(),e.j41(354,"p"),e.EFF(355,"Pour d\xe9finir des mod\xe8les suppl\xe9mentaires qui ne sont pas directement r\xe9f\xe9renc\xe9s dans vos contr\xf4leurs mais qui doivent \xeatre inspect\xe9s par le module Swagger, utilisez le d\xe9corateur "),e.j41(356,"code"),e.EFF(357,"@ApiExtraModels()"),e.k0s(),e.EFF(358," :"),e.k0s(),e.j41(359,"app-copy-button")(360,"pre")(361,"code",6),e.EFF(362,"\n@ApiExtraModels(ExtraModel)\nexport class CreateCatDto {}\n"),e.k0s()()(),e.j41(363,"blockquote",7)(364,"strong"),e.EFF(365,"Astuce"),e.k0s(),e.EFF(366," Vous ne devez utiliser "),e.j41(367,"code"),e.EFF(368,"@ApiExtraModels()"),e.k0s(),e.EFF(369," qu'une seule fois pour une classe de mod\xe8le sp\xe9cifique.\n"),e.k0s(),e.j41(370,"p"),e.EFF(371,"Alternativement, vous pouvez passer un objet d'options avec la propri\xe9t\xe9 "),e.j41(372,"code"),e.EFF(373,"extraModels"),e.k0s(),e.EFF(374," sp\xe9cifi\xe9e \xe0 la m\xe9thode "),e.j41(375,"code"),e.EFF(376,"SwaggerModule#createDocument()"),e.k0s(),e.EFF(377,", comme suit :"),e.k0s(),e.j41(378,"app-copy-button")(379,"pre")(380,"code",6),e.EFF(381,"\nconst documentFactory = () =>\n  SwaggerModule.createDocument(app, options, {\n    extraModels: [ExtraModel],\n  });\n"),e.k0s()()(),e.j41(382,"p"),e.EFF(383,"Pour obtenir une r\xe9f\xe9rence ("),e.j41(384,"code"),e.EFF(385,"$ref"),e.k0s(),e.EFF(386,") \xe0 votre mod\xe8le, utilisez la fonction "),e.j41(387,"code"),e.EFF(388,"getSchemaPath(ExtraModel)"),e.k0s(),e.EFF(389," :"),e.k0s(),e.j41(390,"app-copy-button")(391,"pre")(392,"code",6),e.EFF(393,"\n'application/vnd.api+json': {\n   schema: { $ref: getSchemaPath(ExtraModel) },\n},\n"),e.k0s()()(),e.j41(394,"h4",25)(395,"span"),e.EFF(396,"oneOf, anyOf, allOf"),e.k0s()(),e.j41(397,"p"),e.EFF(398,"Pour combiner des sch\xe9mas, vous pouvez utiliser les mots-cl\xe9s "),e.j41(399,"code"),e.EFF(400,"oneOf"),e.k0s(),e.EFF(401,", "),e.j41(402,"code"),e.EFF(403,"anyOf"),e.k0s(),e.EFF(404," ou "),e.j41(405,"code"),e.EFF(406,"allOf"),e.k0s(),e.EFF(407," ("),e.j41(408,"a",26),e.EFF(409,"en savoir plus"),e.k0s(),e.EFF(410,")."),e.k0s(),e.j41(411,"app-copy-button")(412,"pre")(413,"code",6),e.EFF(414,"\n@ApiProperty({\n  oneOf: [\n    { $ref: getSchemaPath(Cat) },\n    { $ref: getSchemaPath(Dog) },\n  ],\n})\npet: Cat | Dog;\n"),e.k0s()()(),e.j41(415,"p"),e.EFF(416,"Si vous souhaitez d\xe9finir un tableau polymorphe (c'est-\xe0-dire un tableau dont les membres couvrent plusieurs sch\xe9mas), vous devez utiliser une d\xe9finition brute (voir ci-dessus) pour d\xe9finir votre type \xe0 la main."),e.k0s(),e.j41(417,"app-copy-button")(418,"pre")(419,"code",6),e.EFF(420,"\ntype Pet = Cat | Dog;\n\n@ApiProperty({\n  type: 'array',\n  items: {\n    oneOf: [\n      { $ref: getSchemaPath(Cat) },\n      { $ref: getSchemaPath(Dog) },\n    ],\n  },\n})\npets: Pet[];\n"),e.k0s()()(),e.j41(421,"blockquote",7)(422,"strong"),e.EFF(423,"Astuce"),e.k0s(),e.EFF(424," La fonction "),e.j41(425,"code"),e.EFF(426,"getSchemaPath()"),e.k0s(),e.EFF(427," est import\xe9e de "),e.j41(428,"code"),e.EFF(429,"@nestjs/swagger"),e.k0s(),e.EFF(430,".\n"),e.k0s(),e.j41(431,"p"),e.EFF(432,"Les deux mod\xe8les "),e.j41(433,"code"),e.EFF(434,"Cat"),e.k0s(),e.EFF(435," et "),e.j41(436,"code"),e.EFF(437,"Dog"),e.k0s(),e.EFF(438," doivent \xeatre d\xe9finis comme des mod\xe8les suppl\xe9mentaires en utilisant le d\xe9corateur "),e.j41(439,"code"),e.EFF(440,"@ApiExtraModels()"),e.k0s(),e.EFF(441," (au niveau de la classe)."),e.k0s(),e.j41(442,"h4",27)(443,"span"),e.EFF(444,"Nom et description du sch\xe9ma"),e.k0s()(),e.j41(445,"p"),e.EFF(446,"Comme vous avez pu le remarquer, le nom du sch\xe9ma g\xe9n\xe9r\xe9 est bas\xe9 sur le nom de la classe du mod\xe8le original (par exemple, le mod\xe8le "),e.j41(447,"code"),e.EFF(448,"CreateCatDto"),e.k0s(),e.EFF(449," g\xe9n\xe8re un sch\xe9ma "),e.j41(450,"code"),e.EFF(451,"CreateCatDto"),e.k0s(),e.EFF(452,"). Si vous souhaitez changer le nom du sch\xe9ma, vous pouvez utiliser le d\xe9corateur "),e.j41(453,"code"),e.EFF(454,"@ApiSchema()"),e.k0s(),e.EFF(455,"."),e.k0s(),e.j41(456,"p"),e.EFF(457,"Voici un exemple :"),e.k0s(),e.j41(458,"app-copy-button")(459,"pre")(460,"code",6),e.EFF(461,"\n@ApiSchema({ name: 'CreateCatRequest' })\nclass CreateCatDto {}\n"),e.k0s()()(),e.j41(462,"p"),e.EFF(463,"Le mod\xe8le ci-dessus sera traduit dans le sch\xe9ma en "),e.j41(464,"code"),e.EFF(465,"CreateCatRequest"),e.k0s(),e.EFF(466,"."),e.k0s(),e.j41(467,"p"),e.EFF(468,"Par d\xe9faut, aucune description n'est ajout\xe9e au sch\xe9ma g\xe9n\xe9r\xe9. Vous pouvez en ajouter une en utilisant l'attribut "),e.j41(469,"code"),e.EFF(470,"description"),e.k0s(),e.EFF(471," :"),e.k0s(),e.j41(472,"app-copy-button")(473,"pre")(474,"code",6),e.EFF(475,"\n@ApiSchema({ description: 'Description of the CreateCatDto schema' })\nclass CreateCatDto {}\n"),e.k0s()()(),e.j41(476,"p"),e.EFF(477,"De cette mani\xe8re, la description sera incluse dans le sch\xe9ma, comme suit :"),e.k0s(),e.j41(478,"pre")(479,"code",20),e.EFF(480,"\nschemas:\n  CreateCatDto:\n    type: object\n    description: Description of the CreateCatDto schema\n"),e.k0s()()())},dependencies:[a.a,b.d,i.z,p.Wk],encapsulation:2,changeDetection:0})}return t})(),data:{title:"Types et param\xe8tres - OpenAPI"}},{path:"operations",component:v,data:{title:"Op\xe9rations - OpenAPI"}},{path:"security",component:A,data:{title:"S\xe9curit\xe9 - OpenAPI"}},{path:"decorators",component:l,data:{title:"D\xe9corateurs - OpenAPI"}},{path:"mapped-types",component:g,data:{title:"Types mapp\xe9s - OpenAPI"}},{path:"cli-plugin",component:E,data:{title:"Plugin CLI - OpenAPI"}},{path:"other-features",component:y,data:{title:"Autres fonctionnalit\xe9s - OpenAPI"}},{path:"migration-guide",component:h,data:{title:"Guide de migration - OpenAPI"}}];let C=(()=>{class t{static \u0275fac=function(s){return new(s||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({imports:[F.MD,d.G,p.iI.forChild(P)]})}return t})()}}]);